 
  
Title:   
Juniper ACX7024 CSR Configuration Guide for TELUS 
Mobility RAN Services 
(Best Common Practise) 
 
  
Abstract:  This document presents the technical description of software 
configuration on Juniper ACX7024 CSR and to be deployed on TELUS 
Mobility RAN IP backhaul project. 
  
  
Author 
Ricky Ip 
  
Last Revised Date 
January 11, 2024 
  
Issue 
1.1 
   
The information herein is TELUS Communications Inc. confidential and proprietary.  Any 
review, distribution or other use of this information outside of one’s scope of employment with 
TELUS is strictly prohibited.  TELUS Communications Inc. will avail itself of all legal rights and 
remedies in protecting the confidentiality, property rights, and use of the information.  If you 
are not a TELUS employee and have this information please call 1-877-333-8888 
immediately. 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
1 
  
  
Revision History 
Issue # 
Issue Date 
Notes 
1.0 
October 31, 2023 
Initial issue for review 
1.1 
December 7, 2023 
Update syslog facility override parameters 
Update tacacs timeout to 10 sec 
DNS setup as optional (currently not in use) 
 
 
 
 
 
 
 
 
The most current version of this document can be found here:  
https://drive.google.com/drive/folders/1Q1Quzq_OE9PkCQkcZRtlztLhYjv_b3I4 
Filename: CSR-ACX7024-configuration-v(latest version) 
  
Data-IP Master Sparing Guidelines (TELUS Internal) 
https://sharepoint.tsl.telus.com/sites/tsbse/Operational%20Docs/Forms/AllItems.aspx?id=%2Fsites%2Fts
bse%2FOperational%20Docs%2FSparing%2FData%2DIP%5FNetwork%5FSparing 
Filename:  UC_Juniper CSR ACX7024 Sparing.xls 
  
 
  
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
2 
Approval 
  
  
Authority 
  
Name 
  
Signature 
  
Function/Group 
  
Date 
Authorized 
& Approved 
Wayne 
Wong 
  
  
  
MPLS DATA/IP 
  
   
Reviewers 
  
Function/Group 
  
Date 
Group Reviewers 
MPLS DATA/IP 
  
  
  
   
Audience 
  
Distribution 
  
Function/Group 
Managers 
 TELUS Mobility, OSS, P&E, LD 
  
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
3 
Table of Contents 
 
INTRODUCTION ............................................................................................................................................ 7 
Software version: ................................................................................................................................. 7 
Hardware Specification: ....................................................................................................................... 7 
Power Spec. .......................................................................................................................................... 9 
ACX7024 Router Bundles List ..................................................................................................................... 13 
SFP/SFP+/SFP28/QSFP28/SPARE PARTS  List ........................................................................................ 15 
LICENSE ................................................................................................................................................... 17 
Deployment : Physical Connection ......................................................................................................... 18 
CSR VR (VRF) instances design ................................................................................................................ 19 
WAN Connectivity Scenario#1 – WAN direct uplink to a RE ................................................................. 22 
WAN Connectivity Scenario#2 – WAN uplink to a BE/DE (7450 ESS6/7) ............................................. 23 
WAN Connectivity Scenario#3 – Offnet 3G/4G WAN uplink to L2 RAN NNIs ...................................... 24 
WAN Connectivity Scenario#4 – WAN shared uplink for 3G/4G/5G .................................................... 25 
WAN Connectivity Scenario#5 – WAN via BELL 10G NNI with CSR GE uplink for  UMTS and 4G ........ 26 
WAN Connectivity Scenario#6 – UMTS/HSPA  Service WAN direct uplink to a RE ............................. 28 
WAN Connectivity Scenario#7 – UMTS/HSPA/4G LTE Service WAN On Typical Offnet Access through 
NNIs......................................................................................................................................................... 30 
WAN Connectivity Scenario#8 – UMTS/HSPA/4G Service WAN Offnet Access through Cogeco 10GE 
NNIs......................................................................................................................................................... 31 
WAN Connectivity Scenario#9 – Enhanced Availability WAN Access on UMTS/HSPA/4G Services ... 34 
WAN Connectivity Scenario#10 – PIOT Private RAN on LTE Service .................................................... 35 
Scenario 1 – Standalone PIOT Site Connection ................................................................................... 35 
Scenario 2 – Geo Redundant PIOT Sites Connection ........................................................................ 37 
Physical Connection ............................................................................................................................ 38 
Private RAN Routing ........................................................................................................................... 39 
SHARE TELUS MPLS RAN TRANSPORT DESIGN ...................................................................................... 40 
Scenario 1 – Standalone PIOT Site on shared TELUS MPLS RAN ...................................................... 40 
LAN Connectivity Scenario#1 – CSR to OAM e/gNode B....................................................................... 41 
LAN Connectivity Scenario#2 – CSR to User/Control Plane e/g Node B .............................................. 42 
LAN Connectivity Scenario#3 – CSR to IP Alarm Equipment................................................................. 43 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
4 
LAN Connectivity Scenario#4 – Hub CSR to Spoke CSR through fiber/circuit ...................................... 44 
LAN Connectivity Scenario#5 – Microwave connection to CSR Hub and Spoke .................................. 45 
LAN Connectivity Scenario#6 – CRAN Huawei USU connection to LTE-OAM ...................................... 46 
LAN Connectivity Scenario#7 – BELL B38 eNodeB on CSR .................................................................... 48 
LAN Connectivity Scenario#8 – Nokia eNB VLAN700 (X2) to Legacy LTE-SERVICE VR ......................... 49 
LAN Connectivity Scenario#9 – Huawei eNB VLAN710 & 720 (X2-C/U) to CP and UP VRs ................. 50 
LAN Connectivity Scenario#10 – Rakuten POC CSR to Cisco CHR with inet.0, CP and UP VRs ............ 51 
LAN Connectivity Scenario#11 – ORAN POC CSR to Ciena CHR with inet.0, inet6.0, CP and UP VRs.. 52 
LAN Connectivity Scenario#12 - SDWAN Satellite Backup Path ........................................................... 53 
LAN Connectivity Scenario#13 - Outdoor Small Cell Connectivity ....................................................... 54 
LAN Connectivity Scenario#14 - SON PnP MicroCell – Huawei ............................................................ 60 
LAN Connectivity Scenario#15 - Remote IP CAMs to KIDC and ADT .................................................... 61 
LAN Connectivity Scenario#16 - 2020 Q4 – SAM SUNG RAN with CUPS (Control & User Plane 
Separation) ............................................................................................................................................. 62 
LAN Connectivity Scenario#17 - 2021 Q3 – Nokia RAN with CUPS (Control & User Plane Separation)
 ................................................................................................................................................................ 63 
CSR Management ................................................................................................................................... 64 
PTP Microwave Inband Management ................................................................................................... 66 
Indoor Small Cell deployment................................................................................................................ 67 
CONFIGURATION ........................................................................................................................................ 69 
Create root password and super-user account & password ................................................................ 69 
Configure loopback interface ................................................................................................................. 70 
Configure system hostname & timezone & ntp .................................................................................... 70 
Configure DNS ........................................................................................................................................ 71 
Configure TACACS+ ................................................................................................................................. 71 
Configure LOGIN ..................................................................................................................................... 71 
Configure System Services  SSH ............................................................................................................. 71 
Configure  Syslog .................................................................................................................................... 72 
Configure SNMP ..................................................................................................................................... 72 
Create access interface – 1G| 10G | 25G (WAN or LAN) ...................................................................... 73 
Create irb L3 interface for L2 access ...................................................................................................... 73 
Create LAN interfaces ............................................................................................................................. 74 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
5 
Configure QOS ........................................................................................................................................ 76 
Configure Firewall Filter – Rate limit to IP Alarm traffic ....................................................................... 80 
Configure BGP Routing Policies ............................................................................................................. 81 
Configure BGP Import Policy IPV4 ..................................................................................................... 81 
Configure BGP Import Policy IPV6 ..................................................................................................... 82 
Configure BGP Export Policy IPV4 ...................................................................................................... 83 
Configure BGP Export Policy IPV6 ...................................................................................................... 84 
Configure BGP Routing Protocol Global (inet.0 & inet6.0) ................................................................... 85 
Configure Static Route - Global Layer ................................................................................................ 86 
Configure Static Route - Global Layer IPV6 ....................................................................................... 86 
Configure Static Route - Virtual Router  IPV4 .................................................................................... 86 
Configure Static Route – Virtual Router  IPV6 ................................................................................... 86 
Configure Routing Instance Virtual Router and BGP Protocol .......................................................... 87 
Rakuten POC CSR to Cisco CHR configuration ....................................................................................... 88 
POC CSR to Ciena CHR configuration ..................................................................................................... 92 
BGP Peering with SDWAN Device : CSR Backup Path ........................................................................... 94 
# BGP Import policy ............................................................................................................................ 94 
# BGP Export policy ............................................................................................................................. 94 
Indoor Small Cell/ IP-CAMS Related configuration ............................................................................... 96 
Configure Firewall Filter – ANTI-SPOOFING AT CSR WAN Sub-Interfaces ........................................ 97 
Configure DHCP server in SC-INET VR ................................................................................................ 97 
Enable IPV4 DHCP-Relay function on a Virtual Routing Instance ..................................................... 99 
Enable IPV6 DHCP-Relay function on a Global inet6.0 Instance ....................................................... 99 
Configure X2-C/U static route with high metric via existing CP/UP uplink BGP export policy ......... 100 
Private RAN Configuration ................................................................................................................... 101 
Configure Firewall Filter – CSR Control Plane Protection ................................................................... 104 
System Capacity Guideline ................................................................................................................... 106 
MIBs for system Monitoring : SNMP TRAPS ........................................................................................ 108 
Appendix A - Upgrade System Software from Factory Shipment .......................................................... 114 
Using USB installation .......................................................................................................................... 114 
Inband Software Upgrade .................................................................................................................... 116 
Appendix B Commands ............................................................................................................................ 120 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
6 
Appendix C - Port Mirror .......................................................................................................................... 122 
Port Mirroring ....................................................................................................................................... 122 
Packet counter setup ........................................................................................................................... 123 
Appendix D  Reference ............................................................................................................................. 125 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
7 
INTRODUCTION 
   
This document provides step-by-step configuration guide for Juniper ACX7024 router using as a 
CSR (Cell site router) to support Mobile Backhaul service, and backhaul IP traffic to the nearest 
TELUS Converged Edge devices (BE/DE/RE) or Collapse Metro SE devices. Low speed access 
such as bonded-T1, DS3 circuit, or Fast Ethernet (10M/100M), is currently out-of-scope. MBH IP 
traffic will be forwarded through Converged Edge/Collapse Metro Network infrastructure to 
regional TELUS Mobility MSO/NGCO, and MOCN NNIs. 
  
In typical deployment scenarios, ACX7024 will be used as a standalone, spoke site, and hub site 
CSR. In some cases, they will be installed at indoor, or in CO (ex. carrier hotels.) Since ACX7024 
platform only supports SFP ports, in such case recommends that all connect devices are required 
to support SFP/SPF+/SPF28/QSFP28 optic.  
 
Naming Standard: “UC” has been reserved for Cell site router use 
Software version: 
  
ACX7024 Junos Evolved SR 22.4R2-S1-EVO 
Download: https://support.juniper.net/support/downloads/?f=acx 
Hardware Specification:  
 
Compact 1 U, hardened platform with 24-cm depth 
Throughput 360 Gbps 
Port density : 24 x 1/10/25GbE + 4 x 100GbE 
 
Dimension and weight: 
 
 
 
Refer to Installation Guide  
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
8 
 
 
 
 
Each ACX7024 router has a console port with an RJ-45 connector, and uses an RJ-45 to DB-9 
rollover cable to a Terminal Server 
Console port default setting 
 
Baud Rate—9600 
Flow Control—None 
Data—8 
Parity—None 
Stop Bits—1 
DCD State—Disregard 
 
 
Cooling fans are not field replaceable  : 
 
https://www.juniper.net/documentation/us/en/hardware/acx7024/topics/concept/acx7024-cooling-
system.html 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
9 
Power Spec. 
 
AC POWER
DC POWER
AC input voltage: 
Operating range: 90 VAC to 264 VAC 
 
AC input line frequency 
50 Hz - 60 Hz 
 
AC input current rating 
6 A at 100 VAC 
3 A at 200 VAC 
 
Typical power consumption (without optics) at 25 
℃ 
97 W 
 
Maximum power consumption (without optics) 
150 W 
 
DC input voltage: 
Rated operating voltage: –48 VDC through –60 
VDC 
 
Operating voltage range: 40 VDC through 72 VDC 
 
DC input current rating 
10 A at 48 VDC 
8.3 A at 60 VDC 
 
Typical power consumption (without optics) at 25 
℃ 
97 W 
 
Maximum power consumption (without optics) 
150 W 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
10 
 
 
 
The ACX7024 routers are available with AC/DC power supply modules (PSMs) and with airflow-
out (AFO). AFO is also known as front-to-back cooling. 
 
 
 
 
Port Panel 
 
 
Port : 0 - 3 are 100G (QSFP28) 
Port : 4 - 27 are multi-rate 1G/10G/25G (SFP/SFP+/SFP28)   
 
** Port 27 (et-0/0/27)  will be blocked/reserved not to use 
** For SFP 1000Base-T Copper Transceiver support only 1G speeds (10/100M is not supported) 
 
LCM Software: 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
11 
 
Product 
Description  
Replacement 
Description  
EOE 
EOS 
Junos Evolved 
SR 
 
22.4R2-S1-EVO
 
 
12/22/2025 
06/22/2026 
 
 
LCM Hardware: 
 
Product 
Description  
Replacement 
Description  
EOE 
EOS 
ACX7024 
ACX7024 
Chassis 
 N/A 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
12 
System Scale:  
 
360Gbps non-blocking Switching capacity 
  
FIB for IPv4 (unicast LPM routes) 
768000 
FIB for IPv6  
192000 
IPv4 interfaces  
16000 
IPv6 interfaces  
2000 
IRB/BVI interfaces  
2000 
VLAN bundling: vlan-id ranges per vlan-id-list  
256 
VRRP groups  
32 
VRFs (Shared by IPv4/IPv6)  
2000 
Single Hop BFD IPv4 sessions, @10 ms  
100 
Single Hop BFD IPv6 sessions, @10 ms  
100 
TCAM (Not in HW) 
N/A 
 
Egress ACL terms  
2000 
Ingress ACL terms  
4000 
Lo0 ACL terms  
1000 
Total Number of Terms in Multiple Term IPv4 
Filter, Terms 
4000 
Loopback IPv6 Filter, Terms 
1024 
Loopback IPv4 Filter, Terms 
1024 
Ingress IPv6 Filter Scale, Terms 
4000 
Ingress IPv4 Filter Scale, Terms 
4000 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
13 
Egress IPv6 Filter Scale, Terms 
2000 
Egress IPv4 Filter Scale, Terms 
2000 
 
 
ACX7024 Router Bundles List 
 
ACX7024 100G bundle 
 
● ACX7024 Chassis with dual DC Power Supplies 
● 100G license fee 
 
SAP
SKU (Vendor Parts#)
QTY
Description
2418368 
ACX7024-DC-2PSU 
1 
ACX7024, DC REDUNDANT 
PSU 
2418369 
S-EACX-100G-A1-P 
1 
SW, EACX A1 SW,100G, 
PERPETUAL, W/O CS 
2418370 
S-PA-AS-100-S-3 
1 
SW,PA-AS, Std,100G,W/SVC 
CS,3Y  (FREE) 
2418371 
SVC-CP-ACX70242P 
1 
JNPR CARE CP SUPT 
ACX7024 2PSU 
Service Period :12 Months (FREE) 
2418372 
SVC-COR-EACX100GAP 
1 
JNPR Care Core Supt 
S-EACX-100G-A1-P 
Service Period :12 Months  (FREE) 
ACX7024 200G bundle 
 
● ACX7024 Chassis with dual DC Power Supplies 
● 100G license fee  x 2  
 
SAP
SKU (Vendor Parts#)
QTY
Description
2418368 
ACX7024-DC-2PSU 
1 
ACX7024, DC REDUNDANT 
PSU 
2418369 
S-EACX-100G-A1-P 
2
SW, EACX A1 SW,100G, 
PERPETUAL, W/O CS 
2418370 
S-PA-AS-100-S-3 
2
SW,PA-AS, Std,100G,W/SVC 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
14 
SAP
SKU (Vendor Parts#)
QTY
Description
2418368 
ACX7024-DC-2PSU 
1 
ACX7024, DC REDUNDANT 
PSU 
CS,3Y  (FREE) 
2418371 
SVC-CP-ACX70242P 
1 
JNPR CARE CP SUPT 
ACX7024 2PSU 
Service Period :12 Months (FREE) 
2418372 
SVC-COR-EACX100GAP 
2
JNPR Care Core Supt 
S-EACX-100G-A1-P 
Service Period :12 Months  (FREE) 
 
ACX7024 300G bundle 
 
● ACX7024 Chassis with dual DC Power Supplies 
● 100G license fee  x 3  
 
 
SAP
SKU (Vendor Parts#)
QTY
Description
2418368 
ACX7024-DC-2PSU 
1 
ACX7024, DC REDUNDANT 
PSU 
2418369 
S-EACX-100G-A1-P 
3
SW, EACX A1 SW,100G, 
PERPETUAL, W/O CS 
2418370 
S-PA-AS-100-S-3 
3
SW,PA-AS, Std,100G,W/SVC 
CS,3Y  (FREE) 
2418371 
SVC-CP-ACX70242P 
1 
JNPR CARE CP SUPT 
ACX7024 2PSU 
Service Period :12 Months (FREE) 
2418372 
SVC-COR-EACX100GAP 
3
JNPR Care Core Supt 
S-EACX-100G-A1-P 
Service Period :12 Months  (FREE) 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
15 
SFP/SFP+/SFP28/QSFP28/SPARE PARTS  List 
 
SAP
SKU (Vendor Parts#) 
Description 
Spec
2418373 
SFPP-10GE-BX10D-IT 
SFP+ 10GE BX10D BiDi 
I-Temp 
Transceiver 
Tx output each lane (maximum) 
0.5 dBm (minimum) -8.2 dBm 
Rx input each lane (maximum) -
0.5 dBm (minimum) -14.4dbm 
SMF ; –40° C to 85° C 
2418374 
SFPP-10GE-BX10U-IT 
SFP+ 10GE BX10DU 
BiDi 
I-Temp Transceiver 
Tx output each lane (maximum) 
0.5 dBm (minimum) -8.2 dBm 
Rx input each lane (maximum) -
0.5 dBm  (minimum) -14.4dbm 
SMF ; –40° C to 85° C 
2418375 
SFPP-10GE-BX40D-IT 
SFP+ 40GE BX40D BiDi 
I-Temp 
Transceiver 
Tx output each lane (maximum) 
4.5 dBm (minimum) -2.7 dBm 
Rx input each lane (maximum) -
9.0 dBm (minimum) -21.2 dbm 
SMF  ; –40° C to 85° C 
2418376 
SFPP-10GE-BX40U-IT 
SFP+ 40GE BX40U BiDi 
I-Temp 
Transceiver 
Tx output each lane (maximum) 
4.5 dBm (minimum) -2.7 dBm 
Rx input each lane (maximum) -
9.0 dBm (minimum) -21.2 dbm 
SMF ; –40° C to 85° C 
2408135 
SFPP-10G-SR-C 
SFP+ 10GE SR 
Transceiver 
Tx output each lane (maximum) -
1 dBm (minimum) -7.3 dBm 
Rx input each lane (maximum) -1 
dBm (minimum) -9.9 dbm 
MMF ; 0° C to 70° C 
2408133
 
SFPP-10G-LR-C 
SFP+ 10GE LR 
Transceiver 
Tx output each lane (maximum) 
0.5 dBm (minimum) -8.2 dBm 
Rx input each lane (maximum) 
0.5 dBm (minimum) -14.4 dbm 
SMF ; 0° C to 70° C 
1628627 
(stock) 
SFPP-10GE-LR 
10 Gigabit Ethernet 
Long Reach SFP+ 
Tx output each lane (maximum) 
0.5 dBm (minimum) -8.2 dBm 
Rx input each lane (maximum) 
0.5 dBm (minimum) -14.4 dbm 
SMF ; 0° C to 70° C 
1894625 
EX-SFP-10GE-ZR 
SFP+ 10GE ZR 
Transceiver, 
Switching 
Tx output each lane (maximum) 4 
dBm (minimum) 0 dBm 
Rx input each lane (maximum) -7 
dBm (minimum) -24 dbm 
SMF ; 0° C to 70° C 
1713971 
(stock) 
SFPP-10GE-ER-XT 
40km SFP Plus optical 
module   
Tx output each lane (maximum) 4 
dBm (minimum) -4.7 dBm 
Rx input each lane (maximum) -1 
dBm (minimum) -15.8 dbm 
SMF ; (0 -85C) 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
16 
2418377 
SFPP-10GE-DWDM-IT 
SFP+ 10GE ZR Tunable 
I-Temp 
Transceiver 
Channel plan wavelength range: 
1528.77 nm to 1566.72 nm 
Channel spacing : 50 GHz 
spacing 
Tx output each lane (maximum) -
1.0 dBm (minimum) -3.0 dBm 
Rx input each lane (maximum) -
8.0 dBm (minimum) -20.0 dbm 
SMF ; –40° C to 85° C 
2418378 
SFPP-10G-CWDM1471 
SFP+ 10GE ZR 1471 
nm 
Transceiver 
Tx output 0 dBm to +4 dBm 
Rx input -7 dBm to -24 dBm 
SMF ;  0° C to 70° C 
2418379 
SFPP-10G-CWDM1491 
SFP+ 10GE ZR 1491 
nm 
Transceiver 
Tx output 0 dBm to +4 dBm 
Rx input -7 dBm to -24 dBm 
SMF ; 0° C to 70° C 
2418380 
SFPP-10G-CWDM1511 
SFP+ 10GE ZR 1511 
nm 
Transceiver 
Tx output 0 dBm to +4 dBm 
Rx input -7 dBm to -24 dBm 
SMF ; 0° C to 70° C 
2418381 
SFPP-10G-CWDM1531 
SFP+ 10GE ZR 1531 
nm 
Transceiver 
Tx output 0 dBm to +4 dBm 
Rx input -7 dBm to -24 dBm 
SMF ; 0° C to 70° C 
2418382 
SFPP-10G-CWDM1551 
SFP+ 10GE ZR 1551 
nm 
Transceiver 
Tx output 0 dBm to +4 dBm 
Rx input -7 dBm to -24 dBm 
SMF ; 0° C to 70° C 
2418383 
SFPP-10G-CWDM1571 
SFP+ 10GE ZR 1571 
nm 
Transceiver 
Tx output 0 dBm to +4 dBm 
Rx input -7 dBm to -24 dBm 
SMF ; 0° C to 70° C 
2418384 
SFPP-10G-CWDM1591 
SFP+ 10GE ZR 1591 
nm 
Transceiver 
Tx output 0 dBm to +4 dBm 
Rx input -7 dBm to -24 dBm 
SMF ; 0° C to 70° C 
2418364 
SFPP-10G-CWDM1611 
SFP+ 10GE ZR 1611 
nm 
Transceiver 
Tx output 0 dBm to +4 dBm 
Rx input -7 dBm to -24 dBm 
SMF ; 0° C to 70° C 
2408131 
SFP-25G-SR-C 
SFP28 25GE SR 
Transceiver 
Tx output each lane (maximum) 
2.4 dBm (minimum) -8.4 dBm 
Rx input each lane (maximum) 
2.4 dBm (minimum) -10.3 dbm 
MMF ; 0° C to 70° C 
2408130 
SFP-25G-LR-C 
SFP28 25GE LR 
Transceiver 
Tx output each lane (maximum) 2 
dBm (minimum) -7 dBm 
Rx input each lane (maximum) 2 
dBm (minimum) -13.3 dbm 
SMF ; 0° C to 70° C 
2407703 
QSFP-100G-LR4-C 
QSFP28 100G LR4 
Transceiver 
Tx output each lane (maximum) 
4.5 dBm (minimum) -4.3 dBm 
Rx input each lane (maximum) 
4.5 dBm (minimum) -10.6 dbm 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
17 
SMF; 0° C to 70° C 
2418365 
QSFP-100G-ZR4 
100G ZR4 Transceiver 
Tx output each lane (maximum) 7 
dBm (minimum) 2 dBm 
Rx input each lane (maximum) 
4.5 dBm (minimum) -28 dbm 
SMF ; 0° C to 70° C 
2417083 
SFP-1G-T-C 
SFP 1000BASE-T 
copper; 100m reach 
on UTP 
Limits to 1G speed 
 
1127143 
SFP-1GE-LX 
SFP OPTIC MODULE - 
1G LX 
Tx output each lane (maximum) -
3.0 dBm (minimum) -9.5 dBm 
Rx input each lane (maximum) -
3.0 dBm (minimum) -19 dbm 
SMF ; 0° C to 70° C 
1093033 
SFP-1GE-SX 
GE SFP SX PLUG 
IN,MOD,SPARE,MULTI
PLE 
Tx output each lane (maximum) 0 
dBm (minimum) -9.5 dBm 
Rx input each lane (maximum) 0 
dBm (minimum) -17 dbm 
SMF ; 0° C to 70° C 
2418366 
JPSU-400W-AC-AFI 
400W, AC, PSU, FRU 
 
2418367 
JPSU-400W-DC-AFI 
400W, DC, PSU, FRU 
 
2418368 
ACX7024-DC-2PSU 
ACX7024, DC 
REDUNDANT 
PSU 
 
 
 
LICENSE 
 
** At this stage Juniper ACX7024 uses RTU license, and it does not require any license key installation. 
 
Planner is required to issue PO for use cases 
 
For 100G License,  issue PO include  1x S-EACX-100G-A1-P 
 
For 200G License, issue PO include  2x  S-EACX-100G-A1-P 
 
For entire 350G License, issue PO include 3x S-EACX-100G-A1-P 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
18 
Deployment : Physical Connection 
 
 
 
 
 
Juniper ACX7024  is equipped with multirate ports, and it supports a wide range of access 
speed  1G/10G/25G and 40G/100G. It also supports tunable DWDM, and CWDM optical 
transceivers. Please refer to available optic transceivers in section 
“SFP/SFP+/SFP28/QSFP28/SPARE PARTS  List” 
 
In a typical cell site deployment scenario,  ACX7024 used as a CSR will have either one uplink 
to an edge RE or dual uplinks to  the nearest SE pairs. It is available to support 1G, 10G to a 
RE, and dual 10G uplinks to SE pair.  
 
Down links are available to support e/g Node B connections, and as well on-site alarm 
equipment connection. CSR hub and spoke topology is supported and backward compatible to 
existing cell sites design. ** Caveat : 10M or 100M speed which is unsupported. 
 
In a few deployment scenarios, CSR will be installed in CO or NGCO (carrier hotel) to support 
small cell deployment. 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
19 
CSR VR (VRF) instances design 
 
 
 
CSR VRs logical separation: 
Global routing layer of a CSR will be reserved for two major purposes: 
-       CSR Management to OSS network resource 
-    Newly adds on Ciena CHR management access to OSS network 
-    SS vDU IPV6 OAM to OSS network 
-    MW management  to OSS network 
-    POE switch management to OSS network 
LTE service VR routing layer on a CSR will be reserved for LTE legacy  service purposes 
without CP/UP separation like Huawei e/g Node B 
-       eNode B traffic control plane and user plane to EPC and MOCN 
LTE OAM VR routing layer of a CSR will be reserved for management purposes 
-       eNode B OAM traffic to MSO legacy TM ENG  
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
20 
Site IP alarm VR routing layer of a CSR will be reserved for on site equipment management 
purposes 
-       TELUS equipment on site monitoring and alarming to MSO OSS network 
  
Year after year, many TM EMS systems have been moved out from TM ENG to the OSS 
distribution network environment, and there are requirements to align RAN on cell site 
equipment to OSS access management standard “TM-RAN VRF” access architecture as from 
2019-Q3. 
During transition period, legacy CSR carries POE switches if applicable will remap from inet.0 to 
RE/SE TM-RAN VRF '' to allow accessing OSS network resources with non RFC-1918 ipv4 
address space. 
When a CSR replacement event happens caused by LCM or access bandwidth upgrade, CSR 
management configuration will be required to upgrade and align to the latest OSS TM-RAN VRF 
architecture. 
This change will reserve and limit CSR global routing layer (inet.0) to be used for devices 
management termination and aggregation such as for down link POE switch, MicroWave, and 
CSR system management,  which require access to network resources in the OSS network. 
Current services VR instances will not be affected except UMTS/HSPA services to be on its VR, 
and no longer in the global routing layer. 
In Q4 2020 introducing SAM SUNG BBU, CSR has enabled three addition VRs to support 
CUPS (Control User Plane Separation)  
-       Control Plane (CP VR instance)  to carry RAN control traffic only ex. MME 
-       User Plane (UP VR instance) to carry RAN user traffic  ex. GTP-U to PGW 
-       OAM (OAM VR instance) to carry RAN BBU management traffic to OSS network 
 In Q3 2021 introducing Nokia BBU, and it merges into CUPS (like SAM SUNG RAN) 
environment as above. 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
21 
For typical end-to-end connectivity from a CSR to MSO has shown in diagram. 
 
 
 
 
 
 
Each routing layer in a CSR will associate to a VPRN service instance on an edge RE to MSO 
RE endpoints. CSR management and LTE traffic will be routed through MPLS to pre-
determined network resources such as EPC (MME, PGW), OSS, TM MSO network resources, 
and MOCN partners. 
In order to achieve CUPS, MSO REs will add additional route-targets to MME and PGW routes 
prefixes, and injects into CP and UP VRs as for RAN CUPS transition. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
22 
 
WAN Connectivity Scenario#1 – WAN direct uplink to a RE 
 
 
 
 
Under this Scenario, new CSR connects to a RE/SE directly through a GE / XE circuit, and 
configuration requirement at CSR: 
- 
a unique VLAN per routing layer ( there is no Red or Blue concept) ; recommend vlan 
range (2001 – 200x for onnet) 
- 
a /30 WAN IP subnet at WAN interface per routing layer 
- 
eBGP configuration per routing layer facing edge RE 
- 
a /32 loopback IP only from (LTE pool) requires at global routing layer for CSR 
management 
 
 
** UMTS Node B interface connection is required to upgrade from 100M to 1G  
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
23 
WAN Connectivity Scenario#2 – WAN uplink to a BE/DE 
(7450 ESS6/7) 
 
 
 
Under this Scenario, a new CSR connects to a BE/DE (7450 ESS6/7) directly through a GE 
circuit (onnet fiber or lease private line, No XE allows to DE), and configuration requirement at 
CSR: 
- 
two unique VLAN per routing layer ( there are Red & Blue concept); recommend vlan 
range ( Red 2001-200x; Blue 3001-300x – both for onnet) 
- 
2x  /30 WAN IP subnets at WAN interface per routing layer 
- 
eBGP configuration per routing layer 
- 
a /32 loopback IP (from LTE pool) only requires at global routing layer for CSR 
management 
- 
separated VPLS service instances are to be created at BE/DE and associate to the 
proper CSR sub-interfaces 
 
 
** UMTS Node B interface connection is required to upgrade from 100M to 1G  
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
24 
WAN Connectivity Scenario#3 – Offnet 3G/4G WAN uplink to 
L2 RAN NNIs 
 
 
 
 
Under this Scenario, a new CSR connects last mile access to an offnet carrier network and IP 
traffic is to be dropped at 10GE NNI on a BE/DE (7450 ESS6), and then forward to REs.  
Configuration requirement at CSR: 
-       two unique VLAN per routing layer ( there are Red & Blue concept); recommend 
negotiation to offnet carrier with vlan range (ex. Red 2001-2999; Blue 3001-3999 for 
offnet) 
-       2x  /30 WAN IP subnet at WAN interface per routing layer 
-       eBGP configuration per routing layer facing edge REs 
-       a /32 loopback IP (from LTE pool) only at global routing layer for CSR 
management 
-       separated VPLS service instances are to be created at corresponded BE/DE and 
associate to the proper vlans and CSR sub-interfaces (No XE from CSR allow via 
NNI) 
** In Q3 2023, TELUS has implemented offnet carrier L2 RAN NNIs directly connect to a pair of 
REs in East Region and eliminated the requirement of BE/DE switches. 
 
** UMTS Node B interface connection is required to upgrade from 100M to 1G  
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
25 
WAN Connectivity Scenario#4 – WAN shared uplink for 
3G/4G/5G 
 
 
 
 
Under UMTS/LTE combined Legacy scenario, a shared uplink GE port is to be used to support 
both UMTS and 4G LTE traffic.  
 
UMTS service configuration requirement: 
- 
UMTS configuration under global routing layer (prior to Q3-2019) 
- 
As from (Q3 – 2019) to be on its own VR  
- 
a /32 IP loopback assigns from UMTS/HSPA Mgt IP block 
- 
enable OSPF protocol  to form adjacency with UAs through GEMAN 
- 
2x /30 WAN IP from UMTS IP block 
- 
2x VLANs for uplink Red and Blue from UMTS vlan schema 
- 
All UMTS Node B, MW, IP subnets assignment to be sourced from UMTS IP block 
- 
* QoS policy and scheduler to be deployed under LTE, all sub/interfaces should re-
configure to use LTE QoS policy. 
 
4G/5G service configuration requirement: 
- 
LTE service VR, LTE OAM VR, IP alarm VR will be routed through ‘Converge Edge’ 
- 
WAN uplink Scenario #1, 2, 3  will be applied according to access facility design, please 
refer to above “WAN Scenario #1,2,3” 
 
To support SamSung 4G/5G BBU in 2020 Q4, three new (CP, UP, OAM) VRs to be extended 
from CSR to RE. 
 
 
** UMTS Node B interface connection is required to upgrade from 100M to 1G  
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
26 
WAN Connectivity Scenario#5 – WAN via BELL 10G NNI with CSR GE 
uplink for  UMTS and 4G 
 
 
 
 
UMTS service configuration requirement: 
- 
UMTS configuration under global routing layer (prior to Q3-2019) 
- 
As from Q3-2019, UMTS service to be on its VR 
- 
a /32 IP loopback assigns from TM-RAN Mgt IP block 
- 
enable OSPF protocol  to form adjacency with UAs through GEMAN 
- 
2x /30 WAN IP from UMTS IP block 
- 
2x VLANs for uplink Red and Blue from UMTS vlan schema 
- 
All UMTS Node B, MW, IP subnets assignment to be sourced from UMTS IP block 
- 
* QoS policy and scheduler to be deployed under LTE, all sub/interfaces should re-
configure to use LTE QoS policy. 
 
4G service configuration requirement: 
- 
As from 2019-Q3, global layer reserves for OSS management access 
- 
LTE service VR, LTE OAM VR, IP alarm VR will be routed through ‘Converge Edge’ 
- 
WAN uplink Scenario #3,4  will be applied according to access facility design, please 
refer to above “WAN Scenario #3,4” 
- 
At WAN GE uplink, an egress shaper needs to be configured to shape outbound WAN 
traffic to 300M. 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
27 
**Non-preferable solution to support Sam Sung BBU in 2020 Q4 due to 300M WAN constrain. 
 
Example 
@ GE WAN uplink applies: 
 
set class-of-service interfaces ge-x/y/z shaping-rate 300m  
 
** UMTS Node B interface connection is required to upgrade to  from 100M to 1G 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
28 
WAN Connectivity Scenario#6 – UMTS/HSPA  Service WAN direct 
uplink to a RE 
 
 
 
 
When there is Converged Edge network access coverage in service location, HSPA/UMTS 
access service can be terminated on an edged RE network element. A unique regional VPRN 
service instance for UMTS/HSPA  is to be created across regional edge RE and MSO REs to 
allow MPLS VPN connections to reach RNCs at regional MSO. 
The attached table shows that all CSRs loopback are to be associated with a specific RT 
“64490:1” at edge REs, and node B, MW routes are to be associated with another RT 
associated to regional MSO REs. 
** In Q3 2019, new HSPA to be separated from CSR inet.0 (global) and with its own VR. CSR 
inet.0 straightly limits to use for IP transport management to OSS network. 
 
 
*As from Q3 – 2019, under TM-RAN OSS architecture, CSR MGT loopback assigns a specific 
RT “852:5946” at edge RE/SE. 
UMTS/HSPA service configuration requirement on a CSR: 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
29 
-       UMTS/HSPA configuration under global routing layer, and to be moved to its own 
VR as from Q3-2019 
-       a /32 loopback IP assigns from new LTE Mgt IP block for access via TM-RAN  
-       enable eBGP protocol  to form adjacency with an edged RE (shut/delete OSPF) 
-       no BFD requirement on CSR 
-       1x /30 WAN IP subnet from LTE WAN IP block 
-       Vlan 2001 is to be used for WAN L3 interface 
-       All UMTS/HSPA  Node B, MW, IP subnets assignment to be sourced from UMTS 
IP block 
-    * QoS policy and scheduler to be deployed under LTE, all sub/interfaces should 
re-configure to use LTE QoS policy 
 
** UMTS Node B interface connection is required to upgrade from 100M to 1G  
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
30 
WAN Connectivity Scenario#7 – UMTS/HSPA/4G LTE Service 
WAN On Typical Offnet Access through NNIs 
 
 
 
 
 
When there isn’t any Converged Edge or Collapse Metro network access coverage in service 
location, offnet access circuit with dedicated bandwidth can be ordered from a third party carrier. 
UMTS/HSPA/4G traffic will be transited across third party carrier network and handover to 
TELUS through NNI network elements. Under offnet scenario of Converged Edge network, 
HSPA/UMTS/4G access service is be terminated on an edged DE (ESS6) network element. A 
unique regional VPRN service instance for UMTS/HSPA/4G is to be created across regional 
edged RE and MSO REs to allow MPLS VPN connections to reach RNCs of regional MSO. For 
4G service, they are to be on another VPRN instances.  
 
*As from Q3 – 2019, under TM-RAN OSS architecture, CSR MGT loopback assigns a specific 
RT “852:5946” at edge RE/SE. 
UMTS/HSPA service configuration requirement on a CSR: 
- 
UMTS/HSPA configuration under global routing layer, to be moved to its own VR under 
new build or CSR HW upgrade as from Q3-2019 
- 
a /32 loopback IP assigns from new LTE Mgt IP block 
- 
enable eBGP protocol  to form adjacency with an edged RE(shut/delete OSPF to UAs) 
- 
no BFD requirement on CSR 
- 
2x /30 WAN IP subnet from LTE WAN IP block 
- 
VLAN 2001 and 3001 are to be used for Bell and Atria WAN L3 interface 
- 
Exception on Cogeco * VLAN  (Red and Blue) is to be unique per site because of 
limitation on Cogeco network infrastructure to support 
- 
All UMTS/HSPA  Node B, MW, IP subnets assignment to be sourced from UMTS IP 
block 
- 
* QoS policy and scheduler to be deployed under LTE, all sub/interfaces should re-
configure to use LTE QoS policy 
 
** UMTS Node B interface connection is required to upgrade from 100M to 1G  
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
31 
WAN Connectivity Scenario#8 – UMTS/HSPA/4G Service 
WAN Offnet Access through Cogeco 10GE NNIs 
 
 
With a new pair 10GE NNI build driven by 4G LTE project in 2012, both LTE and HSPA offnet 
access service can be transited across the Cogeco network environment. Cogeco will apply a 
unique outer-tag on IP packets egress from Red and Blue paths per site, and transparent to 
TELUS NNI devices. These outer-tags are to be removed at Cogeco NNI devices facing TELUS 
NNI network equipment. As a result, vlans assignments per cell site CSR are unique, and this 
needs to match with TELUS NNI network equipment. Example: (Please refer to service order to 
obtain VLAN assignment per cell site location under offnet Cogeco Network) 
Site A  Red path vlan range (2001-2004); Blue path vlan range (3001-3004) 
Site B  Red path vlan range (2005-2008); Blue path vlan range (3005-3008) 
. 
. 
And continue to the last cell site. 
The Configuration for LTE services are to be referred to “WAN Scenario#7”, and the 
configuration for HSPA services are to be referred to “WAN Scenario#9”. 
LTE service configuration requirement: 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
32 
-       LTE service VR, LTE OAM VR, IP alarm VR will be routed through ‘Converge Edge’ 
-       WAN uplink Scenario #10  will be applied according to access facility design, please 
refer to above “WAN Scenario #10” 
-       At WAN GE uplink, an egress shaper needs to be configured to shape outbound WAN 
traffic to 300M 
-    * QoS policy and scheduler to be deployed under LTE, all sub/interfaces should re-
configure to use LTE QoS policy  
Example 
**Please verify service order whether access circuit is a 1GE or 300M 
For  300M access @ GE WAN uplink applies: 
set class-of-service interfaces ge-x/y/z shaping-rate 300m 
  
UMTS/HSPA service configuration requirement on a new CSR: 
-       UMTS/HSPA configuration under global routing layer, to be moved to its own VR 
under new build or CSR HW upgrade as from Q3-2019 
-       a /32 loopback IP assigns from new LTE Mgt IP block to access TM-RAN 
-       enable eBGP protocol  to form adjacency with an edged RE 
-       no BFD requirement on CSR 
-       2x /30 WAN IP subnet from LTE WAN IP block 
-       Exception on Cogeco * VLAN  (Red and Blue) is to be unique per site 
because of limitation on Cogeco network infrastructure to support 
-       All UMTS/HSPA  Node B, MW, IP subnets assignment to be sourced from UMTS 
IP block 
-    * QoS policy and scheduler to be deployed under LTE, all sub/interfaces should 
re-configure to use LTE QoS policy 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
33 
 
 
 
In Q3 2023, BELL RAN NNIs and Cogeco NNIs in Ontario have been migrated to Juniper REs 
 
** UMTS Node B interface connection is required to upgrade from 100M to 1G  
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
34 
WAN Connectivity Scenario#9 – Enhanced Availability WAN 
Access on UMTS/HSPA/4G Services 
 
The following design scenario applies to cell site location, where it requires enhanced 
availability WAN access apart from last mile single WAN access standard backhaul design. 
 
 
Under this design scenario, RF designers will distribute HSPA node Bs, and LTE enode Bs 
coverage across minimum two or more CSRs to minimize single point of CSR failure. To further 
enhance both CSR hardware and WAN access availability, Juniper EX  platform was previously 
introduced for this design scenario. For now any similar deployment, it recommends to be 
replaced by Juniper ACX 7024 series platform ongoing. For last mile WAN access, two WAN 
fibers are to be terminated on CSR. To further enhance WAN access availability, the WAN 
access fiber circuits must comply with the following conditions for each on site CSR connection: 
·         Both WAN fibers are to be on separated fiber patch panel 
·         Both WAN fibers are to be on separated building entrance and conduit 
·         Both WAN fibers are on separated paths to two different TELUS COs 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
35 
·         Each WAN fiber circuit is to be terminated on a Converge Edge device (ex. DE, BE, RE,SE  
etc.) 
Under CSR WAN interface configuration, vlan 2001-200x will be associated to one WAN access 
circuit, and vlan 3001-300x will be associated to the second WAN access circuit. 
For LAN side facing connection, it will be followed by the standard deployment. 
** UMTS Node B interface connection is required to upgrade from 100M to 1G  
 
 
 
WAN Connectivity Scenario#10 – PIOT Private RAN on LTE 
Service 
Under PIOT enterprise services (PWN) offered by TELUS Wireless Business Solution, there are 
two service categories. First scenario, there is a requirement to connect CSRs via private dark 
fibers to PIOT customers’ service location. Second scenario, the PIOT core connects to TELUS 
MPLS to reach TELUS RAN using existing TELUS RAN backhaul. 
Scenario 1 – Standalone PIOT Site Connection 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
36 
Under this private RAN deployment case, CMU locates at customer data center/premises 
location, and customer will provide single mode dark fiber (tx/rx) connection between TELUS 
cell site CSR and on site aggregation L2 switch as private RAN termination point. 
On cell site TELUS CSR (cell site router) is required to be the model of a Juniper MX104 or 
EX4300-32F or ACX7024 platform with capability to support multiple 1G/10G. 
Under Private RAN, CSR will form BGP peering with onsite TELUS managed IXR or Aruba 
router pair and to exchange cell site eNodeB routes and CMUs routes. Cell site eNodeB will 
exchange S1-U/C to CMU. There are three logical segment/routing domains to be provisioned. 
VLAN 1600 carries legacy 4G LTE traffic mainly on Huawei RAN. VLAN 1100 carries CP 
(Control-plane) 4G S1-C eNodeB (SamSung or Nokia) traffic, and VLAN 1500 carries UP (User-
plane) 4G LTE S1-U eNodeB traffic . 
 
 
IP addresses assignment on Private RAN must be unique and not to conflict with CSR existing 
IP address spaces 
 Sizing 3x  IPV4 subnet to cover IXRs and CSRs connectivity 
VLAN IPV4 Subnet CSR ASN 
IXR ASN 
1100 IP-A /? TBD 
64490 TBD 
1500 IP-B /? TBD 
64490 TBD 
1600 IP-C /? TBD 
64490 TBD 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
37 
Scenario 2 – Geo Redundant PIOT Sites Connection 
 
 
 
Under geo redundant PIOT deployment scenario, CSR hardware requirement and IP traffic flows are 
same as in Scenario 1. There are two dark fiber paths from each cell site CSR.  One dark fiber establishes 
physical connection between a CSR to an aggregation switch at customer site A, and the second dark 
fiber establishes physic connection between a CSR to an aggregation switch at customer  
 
site B.  For IP addressing design, the two IPV4 subnets use, which require to cover site A & site B 
respectively.  
To avoid PIOT routes leaked into TELUS RAN on both deployment scenarios, CSR will set BGP standard 
community “no-export” on route prefixes received from PIOT sites. IP access-list or firewall filter is to be 
applied on ingress of CSR to restrict specific IP flows running between CMUs and eNode Bs. 
 
VLAN
IPV4 Subnet (Site A)
CSR ASN
IXR ASN
1100
IP-A1 /? TBD
64490
TBD
1500
IP-B1 /? TBD
64490
TBD
1600
IP-C1 /? TBD
64490
TBD
VLAN
IPV4 Subnet (Site B)
CSR ASN
IXR ASN
1100
IP-A2 /? TBD
64490
TBD
1500
IP-B2 /? TBD
64490
TBD
1600
IP-C2/? TBD
64490
TBD
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
38 
Physical Connection 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
39 
CSR port configuration: 
·         Max MTU 
·         Dot1q trunk enable carry vlans (1100,1500,1600) 
 
 
Private RAN Routing 
 
 
 
● 
 eBGP peering are to be enabled in between CSRs and IXRs per vlan 
● 
 CSR import policy to set standard community “no-export” on all learned CMU routes, and to 
avoid those routes leak back into TELUS MPLS RAN 
● 
 CSR applies ACL/firewall filter at ingress direction to restrict specific IP flow coming from CMUs 
such as CMU loopback IPV4 addresses 
● On CSR export policy uplink to RE/SE, apply prefix-list to block/drop CSR to  PWN facing IP-
subnets ** since this is a common subnet to be used for all PWN-IOT Private RAN, and it does 
not need to advertise to MPLS any routing instance. 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
40 
SHARE TELUS MPLS RAN TRANSPORT DESIGN 
Scenario 1 – Standalone PIOT Site on shared TELUS MPLS RAN 
 
 
Under shared TELUS MPLS RAN, PIoT IXR routers establish logical RAN connectivity on a single uplink to 
a RE. These logical access are new VRFs/VPRNs instances for extranet access to legacy LTE RAN, CUPS 
RAN etc. and to allow IP traffic flows between PIoT CMUs and specified eNodeB in TELUS RANs. Routing 
control is to be enforced at RE using BGP import and export policies. Import policy facing CMU uses to 
accept CMU routes, and then advertise to MPLS RANs. Export policy uses to export either default or 
specific eNodeB routes to IXR to allow traffic reaching and receiving from CMUs. 
 BGP routing is to be enabled per VRF/VPRN on RE via CML3 transport link 
 
VLAN
IPV4 Subnet
RE ASN
IXR ASN
1100
IP-A /30
852
TBD
1500
IP-B /30
852
TBD
1600
IP-C /30
852
TBD
 
 
In case any customer has a geo redundant site or branch, the standalone PIOT site is to be deployed on 
that geo customer’s location. 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
41 
LAN Connectivity Scenario#1 – CSR to OAM e/gNode B 
 
 
 
 
Under this Scenario, CSR ‘LTE(4G) OAM VR’ routing layer connects to an Huawei eNode B, 
new OAM VR connects to Sam Sung eNode B, and configuration requirement at CSR: 
Huawei: 
-       Layer-3 GE sub-interface with vlan 10  per LTE OAM VR routing layer 
-       a  /30 LAN IP subnet at LAN interface per LTE OAM VR routing layer 
-       a static route point to OAM loopback interface per LTE OAM VR routing layer 
-       redistribute static route into eBGP configuration per LTE OAM VR routing layer 
  
Sam Sung: 
-        Layer-3 GE sub-interface with vlan 10  per OAM VR routing layer 
-       a  /30 LAN IP subnet at LAN interface per OAM VR routing layer 
-       redistribute static route into eBGP configuration per OAM VR routing layer 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
42 
LAN Connectivity Scenario#2 – CSR to User/Control Plane 
e/g Node B 
 
 
 
Under this Scenario, CSR ‘LTE Service VR’ routing layer connects to an eNodeB, and 
configuration requirement at CSR: 
Huawei: 
-       Layer-3 GE sub-interface with vlan 1000 per LTE Service VR routing layer 
-       a  /30 LAN IP subnet at LAN interface per LTE Service VR routing layer 
-       a static route point to loopback interface per LTE Service VR routing layer 
-       redistribute static route into eBGP configuration per LTE Service VR routing layer 
Sam Sung 
-       Layer-3 GE sub-interface with vlan 1000 (S1/X2-C) per CP VR routing layer 
-       a  /30 LAN IP subnet at LAN interface per CP VR routing layer 
-       redistribute static route into eBGP configuration per CP VR routing layer 
-       Layer-3 GE sub-interface with vlan 2000 (S1/X2-U) per UP VR routing layer 
-       a  /30 LAN IP subnet at LAN interface per UP VR routing layer 
-       redistribute static route into eBGP configuration per UP VR routing layer 
  
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
43 
LAN Connectivity Scenario#3 – CSR to IP Alarm Equipment 
 
 
 
 
Under this Scenario, CSR ‘IP Alarm VR’ routing layer connects to site IP alarm network 
elements, and configuration requirement at CSR: 
 
-       Layer-3 VLAN interface with vlan 20  per IP Alarm VR routing layer, and serves as 
default Gateway facing IP alarm NEs 
-       a  /29 or /28 LAN subnet to be used as part of vlan 20  per IP Alarm VR routing layer 
-       up to maximum 3 ports configured in Layer-2 access interfaces are to be used for IP 
alarm purpose, and for more than 3 access ports requirement, additional Layer-2 switch 
needs to be installed and to be provided by IP alarm team 
-       redistribute VLAN IP subnet to eBGP configuration per IP Alarm VR routing layer 
 
 
 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
44 
LAN Connectivity Scenario#4 – Hub CSR to Spoke CSR 
through fiber/circuit 
 
 
 
 
Under this Scenario, HUB and Spoke CSR is to be connected through a fiber/circuit in the field, 
and CSRs configuration requirement are: 
-       Layer-3 GE sub-interfaces (vlan 2001-200N) per routing layer  between Hub 
and Spoke CSRs  (*N number of VR instances) 
-       N x   /30 IP subnets are to be used for Hub and Spoke connectivity 
-       No eBGP routing protocol running between Hub and Spoke CSR 
-       Multiple static routes are to be configured at Hub CSR per routing layer; static 
routes are to be advertised through eBGP at Hub CSR to RE (ex, spoke side, CSR 
loopback, all IP addresses of an eNodeB, IP alarm etc.) 
-       At spoke site CSR, a default route next hop to Hub CSR is to be configured per 
routing layer 
On spoke site eNode configuration will be identical to the previous LAN connectivity session as 
above. 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
45 
LAN Connectivity Scenario#5 – Microwave connection to 
CSR Hub and Spoke 
 
 
 
 
Under this Scenario, HUB and Spoke CSR is to be connected through Microwave if applicable, 
and CSRs configuration requirement are: 
-       Layer-3 GE sub-interfaces (vlan 2001-2004) per routing layer  between Hub and 
Spoke CSRs 
-       Microwave OAM can be connected to CSR global routing layer and MW OAM IP 
subnet is to be advertised through eBGP to RE 
-       4x   /30 IP subnets are to be used for Hub and Spoke connectivity 
-       No eBGP routing protocol running between Hub and Spoke CSR 
-       Multiple static routes are to be configured at Hub CSR per routing layer; static 
routes are to be advertised through eBGP at Hub CSR to RE (ex, spoke side: CSR 
loopback, all IP addresses of an eNode B, IP alarm etc.) 
-       At spoke site CSR, a default route next hop to Hub CSR is to be configured per 
routing layer 
-       At spoke site eNode configuration will be identical to previous LAN connectivity 
session as above.  
**Non-preferable solution to support SamSung 4G LTE BBU in 2020 Q4 due to MW constrain - 
(TBD) 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
46 
LAN Connectivity Scenario#6 – CRAN Huawei USU 
connection to LTE-OAM 
 
 
 
 
For CRAN small scale deployment, each BBU contains HSPA and LTE modules in one box. 
HSPA and LTE modules have separated Ethernet ports connectivity to CSR, and setup 
configuration is the same as standard Node B, and eNodeB deployment.  A new Huawei switch 
unit ‘USU’ is introduced in CRAN to manage BBU, and USU requires it to communicate with 
U2000 via LTE-OAM VR.  In this case, it is recommended to select an unused vlan for 
deployment (ex. Vlan 60). 
In large scale CO deployment, each USU can manage multiple BBUs.  In such cases, CSRs 
can also be used for USU aggregation. Since USU strictly carries management traffic to U2000, 
aggregating to a CSR may avoid wasting RE access ports.   
 
USU  (LTE+HSPA) 
BBU-CSR 
VLAN 
BBU-CSR 
Transit subnet 
LTE OAM 
60 
?/29 or greater 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
47 
 
 
 
  
Under this Scenario, CSR ‘LTE-OAM VR’ routing layer connects to site Huawei USU network 
elements, and configuration requirement at CSR: 
-       Layer-3 VLAN interface with vlan 60  per LTE-OAM VR routing layer, and serves 
as default Gateway facing Huawei USU 
-       a  /29 or /28 LAN subnet to be used as part of vlan 60  per LTE-OAM VR routing 
layer 
redistribute VLAN IP subnet to eBGP configuration per LTE-OAM VR routing layer 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
48 
LAN Connectivity Scenario#7 – BELL B38 eNodeB on CSR 
 
 
 
For phase 1, Bell Mobility eNodeB is to be connected to TELUS CSR port (1000BT full duplex), 
and CSR configured as access port and traffic to be rate limited 100Mbps bi-direction along with 
firewall filter to restrict IP flows between Bell eNodeB and Bell EPC core network. This CSR port 
is to be bound to current LTE-Service VR. There are requirements to assign a /30 for CSR to 
Bell eNodeB interface configuration, and in addition two loopbacks of /32 for S1C/U.  These IP 
subnets are to be advertised on 4G MOCN NNI back to Bell mobility network. Apart from 
existing Bell Mobility MMEs, PGWs routing information, Bell will advertise their ENM 
(10.7.64.0/25), NTPs (172.25.166.66/32, 172.25.155.225/32) and Secure Gateway subnet into 
TELUS LTE-SERVICE VRF to allow Bell eNodeB to reach those Bell mobility network 
resources.   
 
 
For Phase 2, Bell Mobility will deploy an IPSEC solution from B38 eNodeB to Secure Gateway 
in Bell Mobility core network, and continue using IP address assignment from phase 1. 
  
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
49 
LAN Connectivity Scenario#8 – Nokia eNB VLAN700 (X2) to 
Legacy LTE-SERVICE VR 
 
 
 
 
 
 
Since Nokia eNB NSA introduction under CUPS MBH IP transport architecture, there is a 
requirement to support X2-C/U traffic exchange between Nokia eNB to Huawei eNB (resides in 
Legacy LTE-SERVICE instance). 
  
The workaround is to create a logical sub-interface from Nokia eNB 
-       bind to VLAN 700 
-       allocate a /30 under the supernet  of LTE-SERVICE IPV4 
-       bind this sub-interface onto LTE-SERVICE VR instance on a CSR 
-       CSR will then export this /30 prefix via protocol direct into MPLS VPN (LTE-
SERVICE) to support X2-c/u flows 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
50 
LAN Connectivity Scenario#9 – Huawei eNB VLAN710 & 720 
(X2-C/U) to CP and UP VRs 
 
 
 
 
From Huawei eNBs, two new vlans are to be created. They are VLAN 710 for CP, and VLAN 
720 for UP, and IP subnets assignment to be taken from NG-RAN-CP and NG-RAN-UP IPV4 
pools. These logical connectivity from Huawei legacy eNodeB to NG-RAN-CP and NG-RAN-UP 
routing domain mainly to allow X2-U/C traffic exchange between SamSung and Nokia eNodeBs 
in CP/UP routing domain. Since Huawei eNodeB uses loopback as IP source address, and 
there is need to create static routes next hop Huawei eNodeB loopback in CP/UP. To avoid 
asymmetric routing issues, these newly created static routes will tag with a very high metric to 
100k and to ensure not be selected by route-reflector.  
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
51 
LAN Connectivity Scenario#10 – Rakuten POC CSR to Cisco 
CHR with inet.0, CP and UP VRs 
 
 
 
In order to support CHR native vlan (ZTP) requirement, CSR port configuration has to change to 
ethernet-switching configuration 
·         Create L2 trunk port on CSR 
·         Create native vlan name and id  and irb interface on inet.0 and inet.6 
·         Create CP, UP vlans and irb interfaces to corresponded VRs 
·         Enable IPV4/IPV6 dual stack on irb interfaces 
·         Enable BGPv4/v6 on irb interfaces facing CHR 
·         Since each vlans create from global level per CSR, and it has to be unique per CHR 
connection under Cisco CHR scenario 
·         RAN-MGT (TM-RAN) to be used to support CHR OAM to OSS and to Rakuten vCUs 
·         NG-RAN-CP instance to be merged to current VPRN CP and received only default route 
from RE 
·         NG-RAN-UP instance to be merged to current VPRN UP and received only default route 
from RE 
·         OAM (RAN-MGT) instance to be merged to RAN-MGT (TM-RAN) and received full OAM 
routes 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
52 
LAN Connectivity Scenario#11 – ORAN POC CSR to Ciena 
CHR with inet.0, inet6.0, CP and UP VRs 
 
 
 
 
To support Ciena CHR (ZTP) requirement, CSR port configuration will keep same L3 sub-
interfaces configuration 
·         Create direct connected IPV4/IPV6 p2p sub-interface on inet.0 and inet6.0 facing CHR 
global export direct connected interface IPV4 from inet.0 and BGPv6 on IPV6 from inet6.0 to 
VPRN/VRF RAN-MGT toward OSS network 
·         Create CHR’s CP, UP, RAN-MGT vlans and sub-interfaces to corresponded VRs 
·         Enable IPV4 on sub-interfaces for inet.0, CP, UP VRs 
·         Enable IPV6 on sub-interface for inet6.0 (inet6.0 on CSR for both CHR PnP,  eNB OAM) 
·         Enable BGPv4 on sub-interfaces facing CHR VRs CP, UP (* MD5 password to be sync 
with CHR) 
·         Enable BGPv6 on sub-interfaces facing CHR Global (* MD5 password to be sync with 
CHR) 
·         RE/SE RAN-MGT instance to be used to support CHR IPV4/IPV6 Global (MGT, eNB 
OAM V6) to OSS network resources 
·         NG-RAN-CP instance to be merged to current VPRN/VRF CP and received only default 
route from RE/SE 
·         NG-RAN-UP instance to be merged to current VPRN/VRF UP and received only default 
route from RE/SE 
·         No Native vlan on Ciena, CHR uses tagged vlan 127, and physical connection in between 
either 1G or 10G 
·         PTP traffic G.8275.2 has enabled in VR NG-RAN-CP, this traffic will run between CHRs 
managed by CHRs team 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
53 
LAN Connectivity Scenario#12 - SDWAN Satellite Backup 
Path 
 
 
 
 
In evaluation of using satellite and SDWAN service to provide MBH backup, CSR is required to 
setup BGP peering with SDWAN device: 
  
·         eBGP peering 
o   BGP import policy to set LP = 60 for routes learned from SDWAN; 
o   BGP export policy to set as-path prepend to reduce routing preference via SDWAN path 
·         POC VRFs in scope 
o   NG-RAN-CONTROL 
o   NG-RAN-USER 
o   NG-RAN-OAM 
o   TM-RAN 
o   IP-Alarm 
 
  
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
54 
LAN Connectivity Scenario#13 - Outdoor Small Cell 
Connectivity 
Scenario#1 – Macro Cell Site offload BE/DE 
 
 
For outdoor small cell deployment, CSR model ACX 7024  (previous EX4300/4200-F) is to be 
used for small cell fiber termination. Small cell is a small version of HSPA – Node B (max. 
22Mbps) or LTE – eNode B (max. 55Mbps and up), and typically installs at light pole and street 
environment to offload RF of a Macro cell site. If there is any future plan to install any outdoor 
Wi-Fi hotspot Access point (max. BW 100Mbps), it will allow terminating to the small cell CSR.  
The installation of small cell CSR usually places at TELUS POP/CO (carrier hotel), and there 
might be a case that CSR is to be placed at another secure location away from TELUS 
POP/CO. 
The above diagram (Scenario#1) shows that a small cell CSR directly terminates to a RE, and 
the CSR installation can be co-located with a RE, or at a secure remote service location. The 
latest with Collapse Metro Network introduction, and CSR can be dual home to two SEs 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
55 
Scenario#2 – Macro Cell Site offload to BE/DE 
 
The above diagram (Scenario#2) shows that a small cell CSR directly terminates to a 
7450BE/DE, and the CSR installation can be co-located with a BE/DE, or at a secure remote 
service location with fiber extension to BE/DE location. 
The CSR configuration of small cell deployment contains: 
-       HSPA service and CSR management at Global routing layer  (Same as other cell 
site CSR) 
-       LTE service on a routing instance (Same as cell site CSR cfg) 
-       LTE OAM service on a routing instance (Same as cell site CSR cfg) 
-       IP Alarm service on a routing instance, not a current requirement  (optional – on 
demand  setup at CSR) 
-       WiFi service on a routing instance, not a current requirement  (optional – on 
demand  setup at CSR) 
Note that aggregated bandwidth for small cell Node Bs + eNodeBs + (future Wi-Fi 
Aps, 5G) not to exceed WAN transport uplink capacity. 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
56 
Scenario#3 – Macro Cell Site offloads to backhaul through CSR 
 
 
 
There are scenarios where small cells use either Microwave or fiber terminated to the nearest 
Macro CSR, and in these cases limitation as follow: 
-       The Macro site aggregated bandwidth  not to exceed  WAN uplink capacity for 
onnet, and offnet 300M ( in some offnet hub-spoke setup, it could be up to 1GE 
WAN) 
-       Small cell fiber termination subjects to CSR SFP port availability 
-       Micro Wave port termination subjects to CSR port availability 
 
 
Scenario#4 – Small Cell Site use for extend coverage 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
57 
 
 
 
There are scenarios where small cells use for extend HSPA and LTE services coverage without 
Macro cell nearby, and in these cases limitation as follow: 
-       The CSR site aggregated bandwidth small cell Node Bs + eNodeBs + (future Wi-
Fi Aps, 5G) not to exceed  WAN uplink capacity for onnet, and offnet at 300M access 
( in some offnet hub-spoke setup, it could be up to 1GE or higher) 
-       Designers should take into account capacity requirements for all various types of 
services (HSPA, 4G, 5G, Wi-Fi)  at a small cell installed location for initial 
deployment, and a 5G addon can be supported. 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
58 
Scenario#5 – Small Cell Site using dual-band Radios 
 
 
 
There are scenarios where small cells used supported dual bands where both LTE and HSPA is 
housed in a single unit and share same transport facility to CSR. In this scenario, HSPA traffic 
to microcell will be vlan tagged using VLAN 100 on both microcell and CSR. Standard 
configuration for LTE service and OAM still applies. The logical configuration is as follows. 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
59 
 
 
 
 
 
Under this Scenario, configuration requirement at CSR: 
-       Layer-3 GE sub-interface using vlan 10  for OAM 
-       a  /30 LAN IP subnet at LAN interface  in OAM VR instance 
-       Layer-3 GE sub-interface using vlan 1000  for LTE service 
-       a  /30 LAN IP subnet at LAN interface in LTE VR instance 
-       Two static routes point to LTE loopback interfaces in LTE VR instance 
-       redistribute static routes into eBGP configuration in LTE VR instance 
-       Layer-3 GE sub-interface using vlan 100  for HSPA in global routing table 
 
 
 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
60 
LAN Connectivity Scenario#14 - SON PnP MicroCell – Huawei  
 
 
For SON PnP MicroCell auto installation, an CSR is to be used as the microcell aggregation 
router.  CSR must be able to support dhcp-relay function under virtual routing instance.  In 
typical deployment,  dhcp-relay is to be enabled under LTE-OAM routing instance.  For the 
Huawei microcell case, dhcp server is to be pointed to the IP address of Huawei EMS M2000 
OAM. CSR OAM gateway interface is used as dhcp-relay agent gateway interface. 
When a microcell eNodeB startup, it will execute vlan probe procedure, and to send dhcp 
discover packet associate to a range of vlan.  When the vlan matches OAM vlan 10, dhcp 
discover packets reach the CSR relay agent, and append the gateway IP as the source of dhcp 
discover packet.  Then dhcp packet destination IP will be updated to Huawei dhcp server IP 
address. Both endpoints microcell eNode B and Huawei dhcp server will go through the dhcp 
process in four states (discover, offer, request, ack). 
After microcell eNode B has acquired IP address from dhcp server,  it will download the final 
configuration from Huawei M2000. Then it goes through the reboot cycle, and finalizes the 
setup.  
**Note that   dhcp service between microcell eNodeB and dhcp-server is a one-time process. 
When microcell eNode B obtains its final configuration, the dhcp-client process will never 
happen. 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
61 
LAN Connectivity Scenario#15 - Remote IP CAMs to KIDC 
and ADT 
 
 
 
In this remote IP CAMs use case, there are POEswitches connecting to CSR RJ45 Ethernet 
access port hard coded with 100FDX, and VLAN 80 to be used for IP CAM service.  VLAN 80 
L3 interface is to be terminated at existing IP_ALARM VR.  The following modification to be 
applied to CSR and RE or SE. 
  
Under CSR: 
·        VLAN 80 L3 IP address to be retrieved from DHCP pool (first IP address) 
·        DHCP relay configuration to be enabled within IP_ALARM VR 
-        DHCP pool  and server IP address to be assigned by “Christian Petersen” team via NCD 
·        DHCP pool subnets to be advertised via BGP to RE/SE via IP_ALARM VRF/VPRN 
·        IDC IP CAM LAN, DHCP servers IP address/subnets learns from RE/SE via IP_ALARM 
VRF/VPRN 
  
Under RE/SE 
·         Update VRF/VPRN IP_Alarm import policy to import RT 852:3670 (TELUS KIDC) 
·         Update VRF/VPRN IP_Alarm import policy to import RT TBD (External ADT L3VPN) 
·         Update VRF/VPRN IP_Alarm export policy to export RT (qn unique RT) or optional tag 
DHCP pool with same RT 852:3670 along with prefix-list matching the exact DHCP pool subnet 
(without cfg remote KIDC RE VPRN instance) 
 
** UMTS Node B interface connection is required to upgrade from 100M to 1G 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
62 
LAN Connectivity Scenario#16 - 2020 Q4 – SAM SUNG RAN 
with CUPS (Control & User Plane Separation) 
 
 
 
In Q4 2020, TELUS introduces new RAN vendor Sam Sung to provide eNodeB (LTE) and 
gNode B (5G NR). Sam Sung BBUs (eNodeB and gNode B) are capable to support CUPS 
(Control and User plane traffic separation). This capability has driven IP transport to be able to 
separate these traffic into separate VRFs in the long term. During the transition period, Sam 
Sung eNode requires to reach MSO resources such as MME, PGW etc. To achieve this 
requirement, IP transport enable the followings: 
  
·         Enable addition RTs tagged on MME, PGW prefixes, and inject to CP & UP VRFs 
accordingly 
·         CP, UP, OAM VRFs to span nation-wide (no longer with east & west separation) 
·         CP, UP VRFs to be integrated to 2021 5G SA core network 
·         Sam Sung BBU does not support loopback logical interfaces (Unlike Huawei BBU) 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
63 
LAN Connectivity Scenario#17 - 2021 Q3 – Nokia RAN with 
CUPS (Control & User Plane Separation) 
 
 
 
In Q3 2021, TELUS introduced 2nd RAN vendor Nokia to provide eNodeB (LTE) and gNode B 
(5G NR, SA). Nokia BBUs (eNodeB and gNodeB) are capable to support CUPS (Control and 
User plane traffic separation). This capability has driven IP transport to be able to separate 
these traffic into separate VRFs in the long term. During the transition period, Nokia eNode 
requires to reach MSO resources such as MME, PGW etc. To achieve this requirement, IP 
transport enable the followings: 
  
·         Enable addition RTs tagged on MME, PGW prefixes, and inject to CP & UP VRFs 
accordingly 
·         CP, UP, OAM VRFs to span nation-wide (no longer with east & west separation) 
·         CP, UP VRFs to be integrated to 2021 5G SA core network 
·         Nokia BBU does not support loopback logical interfaces (Unlike Huawei BBU) 
·         For early Q3 2021, eNodeB and gNodeB are to be in separated chassis/hardware 
·         Nokia BBU will have dual-stack IPV4 and IPV6 enable 
 
OAM instance
VLAN : 10
CONTROL PLANE instance
VLAN: 1000 (eNB), 500 (gNB)
USER/DATA PLANE instance
VLAN: 2000 (eNB), 600 (gNB)
X2-U/C to Legacy (LTE-
SERVICE) VR 
VLAN: 700 (eNB)
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
64 
CSR Management 
 
CSRs are to be terminated on an edge RE/SE in a distributed topology.  There isn’t any 
dedicated edge RE sending connectivity loss alarm.  Attached diagram shows that CSR has a 
direct MPLS path to OSS resources such as Nucool probe, Intelliden, NTP, and jumpoint 
servers etc. 
CSR will have a direct MPLS path to OSS edge RE as well, snmp traps will be forwarded to 
Nucool probes NNM server (TEMIP) can be set up in a way to monitor connectivity of CSRs. 
When the NNM server detects connectivity lost on a CSR, it will generate a ticket to NRC.  In 
reality, EMS to eNodeB will detect connectivity failure much quicker than NNM to CSR. 
**As from Q3-2019, TM-RAN OSS access architecture is to be used for management of remote 
TM devices instead of TM-VRF (legacy). All the latest CSR in band management will use this 
new TM-RAN VRF to access OSS network resources for management support. 
 
 
 
 
 
Example of minimum IP schema on a CSR 
Under current LTE IP RAN service design, CSR is to create multiple VRFs to separate 
management, and user traffic functionality. A typical CSR setup will be a HUB and Spoke, 
standalone design, and with certain IP space requirements as shown. 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
65 
Standalone or Spoke CSR 
Routing 
Layer 
Purpose 
Loopback 
IP 
WAN IP to REs/Hub 
CSR 
LAN IP 
Global 
MGT 
CSR Mgt  (Q3-2019) 
1 x /32 
1 or 2 x /30 
(MW ?) 
TBD 
VR-0 
HSPA (Q3-2019) 
  
1 or 2 x /30 
1x /30 
 
VR-1 
LTE - eNode B OAM 
  
1 or 2 x /30 
1x /30 
VR-2 
LTE - U/C plane 
  
1 or 2 x /30 
1x /30 
VR-3 
Site IP ALARM 
  
1 or 2 x /30 
1x (/29 or 
TBD) 
VR-4 
CP (SamSung and Nokia 
e/g NB) 
  
1 or 2 x /30 
1x /30 
 
VR-5 
UP (SamSung and Nokia 
e/g NB) 
  
1 or 2 x /30 
1x /30 
 
VR-6 
OAM (SamSung and Nokia 
e/g NB) 
  
1 or 2 x /30 
1x /30 
 
 
 
 
 
 
 
Hub CSR 
Routing 
Layer 
Purpose 
Loopbac
k IP 
WAN IP to 
REs 
LAN IP 
from Hub to 
Spoke CSR 
Global 
(HSPA) 
CSR Mgt (Q3-2019) 
1 x /32 
1 or 2 x 
/30 
MW ? 
TBD 
1 x /30 
VR-0 
HSPA (Q3-2019) 
  
1 or 2 x 
/30 
1x /30 
1x /30 
VR-1 
LTE - eNode B OAM 
  
1 or 2 x 
/30 
1x /30 
1 x /30 
VR-2 
LTE - U/C (TELUS) 
  
1 or 2 x 
/30 
1x /30 
1 x /30 
VR-3 
Site IP ALARM 
  
1 or 2 x 
/30 
1x (/29 or 
TBD) 
1 x /30 
VR-4 
CP (SamSung and 
Nokia e/g NB) 
  
1 or 2 x 
/30 
1x /30 
1 x /30 
VR-5 
UP (SamSung and 
Nokia e/g NB) 
  
1 or 2 x 
/30 
1x /30 
1 x /30 
VR-6 
OAM (SamSung and 
Nokia e/g NB) 
  
1 or 2 x 
/30 
1x /30 
1 x /30 
 
 
  
 
 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
66 
PTP Microwave Inband Management 
 
This section covers PTP Microwave, which is currently designed without management 
capability. Below diagram shows a point-to-point Microwave is being used to provide hub & 
spoke CSR IP transport connectivity. Vlan 1111 will be enabled on the PTP Microwave dot1q 
trunk along with uplink vlans (2001 – 200x), and Microwave OAM IP subnets ties to vlan 1111 is 
to be advertised through Global VR from hub CSR. Users from MSO jumpbox can access 
remotely to Microwave OAM management IP subnets. LTE qos policy will be applied to this vlan 
1111 sub-interface. 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
67 
Indoor Small Cell deployment 
 
 
 
 
In this deployment scenario, CSR is to be used for indoor small cell (pico) backhaul purpose, 
and there is no plan to terminate any ‘IP alarm’ or any macro cell services (LTE/HSPA+). A new 
VR instance SC-INET  is to be introduced and transit traffic to the Internet via Edge RE. 
 
 
 
For CSR management purposes, the global routing layer is to be used for management access, 
and is the same as general CSR deployment. 
  
For SC backhaul, CSR with DHCP server enables to assign outer IP address for each small cell 
(pico), which allows small cell access to the internet.  CSR Firewall filter is required for anti-
spooling protection, and control plane filter “protect-RE” also requires it to be enabled to prevent 
illegal access to CSR from the Internet. 
  
Under the access design scenario, WAN access of CSR is to be connected to Converge edge 
devices either using DE or RE directly.  
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
68 
 
For CSR WAN port access, VLAN 2xxx (RED) and VLAN 3yyy (BLUE) are to be used and 
VLAN 40 for Indoor Small Cell Base Stations termination. 
Public routable IP address is to be used 
 
 
Routing Layer 
Purpose 
Loopback IP 
(Public Routable ) 
WAN IP to REs 
  
(Public Routable ) 
LAN IP 
  
VR-5 
SC-INET 
  
1 or 2 x /30 
1x /29 or larger 
  
 
 
  
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
69 
CONFIGURATION 
 
The intended use of this section is for the user to modify the configuration text below that is 
RED in color, once this text has been modified to the correct parameters the completed 
configuration should be copied and pasted into a text file to prevent control characters from 
being introduced to the device configuration, and then copied into the device.  The text that is in 
BLUE color corresponds to comments provided for information purposes.  The text that is 
GREEN color is optional, and overwrites or changes some configuration lines that may have 
appeared earlier in the configuration template 
 
** By default, Juniper ACX7024  ships with Layer3  port configuration with access port on unit 0 
 
*/initial login as root no password, type cli to enter router prompt 
Configuration mode: */configuration 
 
*/disable ZTP from factory default configuration 
delete chassis auto-image-upgrade 
delete system commit factory-settings 
 
Create root password and super-user account & password 
 */ Enter to configuration mode, type top <enter> to system 
configuration top level 
*/ for root and super-user account, please enter plain text password 
first time, or alternatively the system generated encrypted password   
set system root-authentication encrypted-password "<secret>"; ## SECRET-DATA 
set system login user remote  uid 2000 
set system login user remote  class REMOTE  
 
set system login class REMOTE idle-timeout 15   */ to enable remote user login using tacacs with 
timeout 
set system login class REMOTE permissions all 
set system login class admin-local idle-timeout 15 
*/create super-user access with timeout session 
set system login class admin-local permissions all 
set system login user <admin>  uid 2001 
set system login user <admin>  class admin-local 
set system login user <admin>  encrypted-password "<secret>"; ## SECRET-DATA 
  
set system ports console log-out-on-disconnect    */console setting logout after disconnect console 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
70 
set system ports console type vt100 
 
*/  optional – when this command is being enable, console will no 
longer be accessible and used with caution !! 
  
** set system ports console disable  
Configure loopback interface 
  
*/ create loopback interfaces, and system default sourcing loopback0 
delete interfaces lo0 unit 0 
set interfaces lo0 unit 0 description "CSR loopback address" 
set interfaces lo0 unit 0 family inet no-redirects 
set interfaces lo0 unit 0 family inet address <loopback0_ip_address/prefix> 
set system default-address-selection 
set system no-redirects 
 
*/ disable management port interface – not to be used at remote 
location  
 
set chassis alarm management-ethernet link-down ignore 
set interfaces re0:mgmt-0 disable 
 
*/ disable lldp, enable if needed 
set protocols lldp interface all disable 
Configure system hostname & timezone & ntp 
 
set system host-name  <CLLI> 
set system time-zone  <time-zone> 
*/ ntp client 
set system ntp boot-server <ntp-server-ip-addr> 
set system ntp server <ntp-server-ip-addr> 
set system ntp source-address <loopback0_ip_address> 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
71 
 
Configure DNS 
 
set system name-server  <dns1_ip_address>   # dns currently not in use, optional 
set system name-server  <dns2_ip_address> 
Configure TACACS+ 
 
set system tacplus-server  <tacas1_ip_address>  secret  <key> 
set system tacplus-server  <tacas1_ip_address>  timeout 10 
set system tacplus-server  <tacas1_ip_address>  source-address <loopback0_ip_address> 
set system tacplus-server  <tacas2_ip_address> secret  <key> 
set system tacplus-server  <tacas2_ip_address> timeout 10 
set system tacplus-server  <tacas2_ip_address>  source-address <loopback0_ip_address> 
set system authentication-order tacplus 
set system authentication-order password 
Configure LOGIN 
 
*/ “/n” is newline command 
 
 
set system login announcement "\nlogin message start here " 
set system login message " Hub site router information" 
 
Configure System Services  SSH 
 
*/ ftp server service to be disable. 
*/ enable when needs it 
*/ by default, sftp to be used for file transfer  
 
set system services ssh root-login deny 
set system services ssh protocol-version v2 
set system services ssh ciphers aes128-ctr 
set system services ssh ciphers aes192-ctr 
set system services ssh ciphers aes256-ctr 
set system services ssh connection-limit 10 
set system services ssh rate-limit 10 
set system services netconf ssh   
set system services ssh sftp-server    */use only when file transfer initiates from 
Jumpbox to CSR, by default CSR will not accept sftp 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
72 
*/ for security reason, telnet should be replaced by ssh, and OSS 
firewall needs to allow SSH traffic to pass-through  
Configure  Syslog 
set system syslog console any alert 
set system syslog console pfe error 
set system syslog user * any emergency 
set system syslog host <syslog_ip_address> any info 
set system syslog host <syslog_ip_address> facility-override local7  */update since version 
1.1 
set system syslog host <syslog_ip_address> log-prefix <CLLI>     */hostname 
set system syslog source-address <loopback0_ip_address> 
set system syslog file messages any info   */local syslog 
set system syslog file messages change-log any 
set system syslog file interactive-commands interactive-commands any 
set system syslog file default-log-messages any any 
set system syslog file default-log-messages structured-data 
set system syslog file local-syslog authorization info 
set system syslog file messages authorization info 
Configure SNMP 
 
set snmp community  <community string1>  authorization read-only 
set snmp community <community string1>  clients 0.0.0.0/0 restrict 
set snmp community <community string1>  clients <ip address_or_subnet/mask > 
set snmp community  <community string2> authorization read-write 
set snmp community <community string2>  clients 0.0.0.0/0 restrict 
set snmp community <community string2>  clients <ip address_ or_subnet /mask > 
set snmp trap-options source-address <loopback0_ip_address> 
set snmp trap-group <group name> version all 
set snmp trap-group <group name> categories chassis 
set snmp trap-group <group name> categories link 
set snmp trap-group <group name> categories routing 
set snmp trap-group <group name> categories startup 
set snmp trap-group <group name> targets <traps_server1_ip_address> 
set snmp trap-group <group name> targets <traps_server2_ip_address> 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
73 
Create access interface – 1G| 10G | 25G (WAN or LAN) 
 
*/ for DWDM 10G tunable optic transceiver, setup wavelength associate 
to MUX assignment. 
 
 
set interfaces et-0/0/x optics-options wavelength 15xx.xx   */reference to MUX port spec. 
set interfaces et-0/0/x optics-options laser-enable 
 
 
*/ ports 0-3 (40G/100G); ports 4 - 26 (1G/10G/25G), port 27 reserved 
*/ vlan 2001-2004 range for red uplink, 3001-3004 range for blue 
uplink 
     
 
delete set interfaces et-0/0/x   # to remove default configuration unit 0 
set interfaces et-0/0/x hierarchical-scheduler 
set interfaces et-0/0/x flexible-vlan-tagging 
set interfaces et-0/0/x mtu 9216 
set interfaces et-0/0/x encapsulation flexible-ethernet-services 
set interfaces et-0/0/x ether-options no-auto-negotiation */refer to LAN interfaces table 
set interfaces et-0/0/x ether-options no-flow-control 
set interfaces et-0/0/x description "port  description" 
set interfaces et-0/0/x speed  1g/10g/25g             */refer to optic speed 
set interfaces et-0/0/x unit <uid> description "subif description" 
set interfaces et-0/0/x unit <uid> vlan-id  <vid> 
set interfaces et-0/0/x unit <uid> family inet address IPV4_address/mask 
set interfaces et-0/0/x unit <uid> family inet6 address IPV6_address/64 
. 
. 
<next> 
set interfaces et-0/0/x description "port  description" 
set interfaces et-0/0/x unit <uid> description "subif description" 
set interfaces et-0/0/x unit <uid> vlan-id  <vid> 
set interfaces et-0/0/x unit <uid> family inet address IPV4_address/mask 
set interfaces et-0/0/x unit <uid> family inet6 address IPV6_address/64 
 
Create irb L3 interface for L2 access  
 
*/ mainly use for multiple switchport to a single L3 gateway like pico 
cell or IP alarm etc. 
 
*/ first create vlan and irb interface 
 
set vlans <vlan-name>  vlan-id <vid> 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
74 
set vlans <vlan-name> l3-interface irb.<vid> 
set interfaces irb unit <vid> family inet address IPV4_address/mask 
set interfaces irb unit <vid> family no-redirects 
set interfaces irb unit<vid> family inet6 address  IPV6_address/64 
set interfaces irb unit<vid> family inet6 no-redirects 
 
*/For trunk port: 
set interfaces et-0/0/x description "port description" 
set interfaces et-0/0/x hierarchical-scheduler 
set interfaces et-0/0/x  native-vlan-id <native-vid>    */for native vlan if needs 
set interfaces et-0/0/x speed 1g|10g|25g 
set interfaces et-0/0/x mtu 9216 
set interfaces et-0/0/x unit 0 family ethernet-switching interface-mode trunk 
set interfaces et-0/0/x unit 0 family ethernet-switching vlan members <vlan-name> 
 
 
*/For access port: 
set interfaces et-0/0/x description "port description" 
set interfaces et-0/0/x hierarchical-scheduler 
set interfaces et-0/0/x speed 1g 
set interfaces et-0/0/x mtu 9216 
set interfaces et-0/0/x unit 0 family ethernet-switching interface-mode access 
set interfaces et-0/0/x unit 0 family ethernet-switching vlan members <vlan-name> 
 
 
*/disble unused physical ports / interfaces 
 
set interfaces  et-0/0/x   disable  
 
Create LAN interfaces 
*/ create Node B/eNode B, Node B/spoke site/MW facing interfaces 
Reference to above section for speed and duplex adjustment for e/g Node B  
Production (documented) : 
eNode B/ gNode B 
Port 
auto-negotiation 
Port 
no-autonegotiation 
Port Speed /duplex 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
75 
Huawei  eNode B - LTE 
Yes - Copper 
Auto/Auto- Copper 
Huawei  eNode B - LTE 
  
Yes  - Fiber 
10G/Full duplex 
Huawei gNode B -NR 
Yes - Copper 
Auto/Auto- Copper 
Huawei gNode B -NR 
  
Yes  - Fiber 
10G/Full duplex 
Ericsson eNode B - LTE 
Yes – Copper  
1G/Full duplex 
Ericsson eNode B - LTE 
Yes - Fiber 
  
10G/ Full duplex 
Ericsson gNode B - NR 
Yes – Copper 
1G/Full duplex 
Ericsson gNode B - NR 
Yes - Fiber 
  
10G/ Full duplex 
SamSung eNode B - 
LTE 
  
Yes - Fiber 
1G/Full duplex 
SamSung eNode B - 
LTE 
  
Yes - Fiber 
10G/ Full duplex 
SamSung gNode B – NR 
DU 
Yes - Fiber 
10G/ Full duplex 
Nokia e/gNode-B 
  
yes 
1G/Full duplex 
(copper) 
  
*/Refer to create access interface section  
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
76 
Configure QOS 
Configure IPV4 classifier for MBH (UMTS/HSPA,LTE,5G,OAM,RAN-NGT etc.) Services 
*/ default dscp map from Juno software, which classified two dscp= be, 
and dscp=NC1 
*/ there is requirement to re-organize all dscp code-points to TELUS 
defined new forwarding classes for LTE: BE,AF2,AF3,EF,signaling_voice 
 
 
*/ create qos classifiers for IPV4 
set class-of-service classifiers dscp MBH_V4 import dscp-default 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF1 loss-priority high code-points be 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF1 loss-priority high code-points cs1 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF1 loss-priority low code-points af11 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF1 loss-priority low code-points af13 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF1 loss-priority low code-points af12 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF2 loss-priority high code-points af22 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF2 loss-priority high code-points af23 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF2 loss-priority low code-points af21 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF3 loss-priority high code-points af32 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF3 loss-priority high code-points af33 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-AF3 loss-priority low code-points af31 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-EF loss-priority high code-points cs3 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-EF loss-priority low code-points af41 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-EF loss-priority low code-points af42 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-EF loss-priority low code-points af43 
set class-of-service classifiers dscp MBH_V4 forwarding-class L-EF loss-priority low code-points cs4 
set class-of-service classifiers dscp MBH_V4 forwarding-class RP loss-priority low code-points cs7 
set class-of-service classifiers dscp MBH_V4 forwarding-class Signaling_voice loss-priority high code-points cs2 
set class-of-service classifiers dscp MBH_V4 forwarding-class Signaling_voice loss-priority low code-points ef 
set class-of-service classifiers dscp MBH_V4 forwarding-class Signaling_voice loss-priority low code-points cs5 
set class-of-service classifiers dscp MBH_V4 forwarding-class Signaling_voice loss-priority low code-points cs6 
 
*/ create classifiers for IPV6 
set class-of-service classifiers dscp-ipv6 MBH_V6 import dscp-ipv6-default 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF1 loss-priority high code-points be 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF1 loss-priority high code-points cs1 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF1 loss-priority low code-points af11 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF1 loss-priority low code-points af13 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
77 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF1 loss-priority low code-points af12 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF2 loss-priority high code-points af22 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF2 loss-priority high code-points af23 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF2 loss-priority low code-points af21 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF3 loss-priority high code-points af32 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF3 loss-priority high code-points af33 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-AF3 loss-priority low code-points af31 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-EF loss-priority high code-points cs3 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-EF loss-priority low code-points af41 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-EF loss-priority low code-points af42 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-EF loss-priority low code-points af43 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class L-EF loss-priority low code-points cs4 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class RP loss-priority low code-points cs7 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class Signaling_voice loss-priority high code-points cs2 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class Signaling_voice loss-priority low code-points ef 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class Signaling_voice loss-priority low code-points cs5 
set class-of-service classifiers dscp-ipv6 MBH_V6 forwarding-class Signaling_voice loss-priority low code-points cs6 
 
*/ PCP setting 
set class-of-service code-point-aliases ieee-802.1 dot1p0 000 
set class-of-service code-point-aliases ieee-802.1 dot1p1 001 
set class-of-service code-point-aliases ieee-802.1 dot1p2 010 
set class-of-service code-point-aliases ieee-802.1 dot1p3 011 
set class-of-service code-point-aliases ieee-802.1 dot1p4 100 
set class-of-service code-point-aliases ieee-802.1 dot1p5 101 
set class-of-service code-point-aliases ieee-802.1 dot1p6 110 
set class-of-service code-point-aliases ieee-802.1 dot1p7 111 
 
*/ system generates traffic marked with cs6 
set class-of-service host-outbound-traffic forwarding-class RP 
set class-of-service host-outbound-traffic dscp-code-point cs6 
*/ tail drop probability setting 
set class-of-service drop-profiles high_drop fill-level 90 drop-probability 0 
set class-of-service drop-profiles high_drop fill-level 100 drop-probability 100 
 
*/ queue assignment for varies traffic class 
set class-of-service forwarding-classes class L-AF1 queue-num 1 
set class-of-service forwarding-classes class L-AF2 queue-num 3 
set class-of-service forwarding-classes class L-AF3 queue-num 4 
set class-of-service forwarding-classes class L-BE queue-num 0 
set class-of-service forwarding-classes class L-EF queue-num 5 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
78 
set class-of-service forwarding-classes class Signaling_voice queue-num 6 
set class-of-service forwarding-classes class RP queue-num 7 
 
 
*/ Qos rewrite for PCP marking on egress 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-AF1 loss-priority high code-point 
dot1p0 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-AF1 loss-priority low code-point 
dot1p0 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-AF2 loss-priority high code-point 
dot1p2 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-AF2 loss-priority low code-point 
dot1p2 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-AF3 loss-priority high code-point 
dot1p3 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-AF3 loss-priority low code-point 
dot1p3 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-BE loss-priority high code-point dot1p0 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-BE loss-priority low code-point dot1p0 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-EF loss-priority high code-point dot1p5 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class L-EF loss-priority low code-point dot1p6 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class RP loss-priority low code-point dot1p7 
set class-of-service rewrite-rules ieee-802.1 MBH-DOT1P forwarding-class Signaling_voice loss-priority low code-
point dot1p7 
 
*/ egress scheduler map 
set class-of-service scheduler-maps MBH_66_21_13 forwarding-class L-AF1 scheduler L-AF1 
set class-of-service scheduler-maps MBH_66_21_13 forwarding-class L-AF2 scheduler L-AF2_21_HS 
set class-of-service scheduler-maps MBH_66_21_13 forwarding-class L-AF3 scheduler L-AF3_66_HS 
set class-of-service scheduler-maps MBH_66_21_13 forwarding-class L-BE scheduler L-BE 
set class-of-service scheduler-maps MBH_66_21_13 forwarding-class L-EF scheduler L-EF 
set class-of-service scheduler-maps MBH_66_21_13 forwarding-class RP scheduler RP 
set class-of-service scheduler-maps MBH_66_21_13 forwarding-class Signaling_voice scheduler Signaling_voice 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
79 
*/ egress schedulers 
set class-of-service schedulers L-AF1 transmit-rate percent 13 
set class-of-service schedulers L-AF1 drop-profile-map loss-priority high protocol any drop-profile high_drop 
set class-of-service schedulers L-AF2_21_HS transmit-rate percent 21 
set class-of-service schedulers L-AF2_21_HS drop-profile-map loss-priority high protocol any drop-profile 
high_drop 
set class-of-service schedulers L-AF3_66_HS transmit-rate percent 66 
set class-of-service schedulers L-AF3_66_HS drop-profile-map loss-priority high protocol any drop-profile 
high_drop 
set class-of-service schedulers L-BE transmit-rate remainder 
set class-of-service schedulers L-EF priority strict-high 
set class-of-service schedulers RP priority strict-high 
set class-of-service schedulers Signaling_voice priority strict-high 
*/ egress shaping for H-cos, refer to port speed 
set class-of-service traffic-control-profiles MBH_100G scheduler-map MBH_66_21_13 
set class-of-service traffic-control-profiles MBH_100G shaping-rate 100g 
set class-of-service traffic-control-profiles MBH_25G scheduler-map MBH_66_21_13 
set class-of-service traffic-control-profiles MBH_25G shaping-rate 25g 
set class-of-service traffic-control-profiles MBH_10G scheduler-map MBH_66_21_13 
set class-of-service traffic-control-profiles MBH_10G shaping-rate 10g 
set class-of-service traffic-control-profiles MBH_1G scheduler-map MBH_66_21_13 
set class-of-service traffic-control-profiles MBH_1G shaping-rate 1g 
set class-of-service traffic-control-profiles MBH_300M scheduler-map MBH_66_21_13 
set class-of-service traffic-control-profiles MBH_300M shaping-rate 300m 
 
*/ interface binding to QOS ingress and PCP remarking 
set class-of-service interfaces et-0/0/x  unit x classifiers dscp MBH_V4 
set class-of-service interfaces et-0/0/x  unit y  classifiers dscp-ipv6 MBH_V6 
 
*/  interface binding to egress traffic control based on port speed, 
select the correct port speed 300M(offnet LTE),1G,10G,25G,100G  
 
set class-of-service interfaces et-0/0/x  output-traffic-control-profile MBH_<speed> 
set class-of-service interfaces et-0/0/x  unit x  rewrite-rules ieee-802.1 MBH-DOT1P  */WAN for only to 
RE/SE or toward spoke CSR 
set class-of-service interfaces et-0/0/x  unit y  rewrite-rules ieee-802.1 MBH-DOT1P  */WAN for only to 
RE/SE or toward spoke CSR 
. 
<next> 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
80 
 
*/ OAM interface qos binding  
 
set class-of-service interfaces et-0/0/x  output-traffic-control-profile MBH_<speed>G 
set class-of-service interfaces et-0/0/x  unit  <uid> forwarding-class  L-AF3 
set class-of-service interfaces et-0/0/x  unit  <uid>  rewrite-rules ieee-802.1 MBH-DOT1P  */WAN for 
only to RE/SE or spoke CSR 
 
 
*/ IP Alarm interface qos binding  
 
set class-of-service interfaces et-0/0/x  output-traffic-control-profile MBH_<speed>G 
set class-of-service interfaces et-0/0/x  unit  <uid> forwarding-class  L-BE 
set class-of-service interfaces et-0/0/x  unit  <uid>  rewrite-rules ieee-802.1 MBH-DOT1P  */WAN for 
only to RE/SE or spoke CSR 
 
Configure Firewall Filter – Rate limit to IP Alarm traffic  
*/ setup 100M policer to limit IP alarm traffic 
set firewall policer 100M if-exceeding bandwidth-limit 100m 
set firewall policer 100M if-exceeding burst-size-limit 125k 
set firewall policer 100M then discard 
 
*/ setup firewall policy to limit IP alarm traffic 
set firewall family ethernet-switching filter IP-ALARM-L2-100M  interface-specific 
set firewall family ethernet-switching filter IP-ALARM-L2-100M term A then accept 
set firewall family ethernet-switching filter IP-ALARM-L2-100M  term A then policer 100M 
set firewall family ethernet-switching filter IP-ALARM-L2-100M term A then policer 100M # option if 
requestor wants more bandwidth : 100M+  policer defined under IPCAM 
  
*/ bind to access ports/interface creates previously for IP alarm LAN 
set interfaces et-0/0/x  unit 0 family ethernet-switching filter input IP-ALARM-L2-100M 
*/ Filter does not apply to IP_CAM POE switch connection 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
81 
Configure BGP Routing Policies 
Configure BGP Import Policy IPV4 
 
*/ Create separate import policy to each global/VRs, receive bgp 
routes from RE 
*/ Same import policy template for RED and BLUE path, different local-
preference value is to be used 
*/ to control routing preference 
  
*/ for CP, UP, OAM, inet.0, IP-Alarm V4 expect to receive default 
route v4 if in VRF available, if not full table to be accept 
set policy-options policy-statement import-routes-bgp-<global /vr-name|red/blue >  term default-v4  from 
protocol bgp 
set policy-options policy-statement import-routes-bgp-<global / vr-name|red/blue >  term default-v4 from  route-
filter 0.0.0.0/0 exact 
# to control CSR route-table size to receive default 
route 
set policy-options policy-statement import-routes-bgp-<global / vr-name|red/blue >  term default-v4 then accept 
set policy-options policy-statement import-routes-bgp-<global / vr-name|red/blue >  term default-v4 then local-
preference <120 or 80> 
*/ local-preference ‘120’ for red path, ‘80’ for blue path 
 
*/ when there is no default route (such as OAM) on  RE/SE VRF/VPRN 
instance, import full routes 
set policy-options policy-statement import-routes-bgp-<global /vr-name|red/blue >  term full-v4  from protocol 
bgp 
set policy-options policy-statement import-routes-bgp-<global / vr-name|red/blue >  term full-v4 then accept 
set policy-options policy-statement import-routes-bgp-<global / vr-name|red/blue >  term full-v4 then local-
preference <120 or 80> 
*/ local-preference ‘120’ for red path, ‘80’ for blue path 
 
set policy-options policy-statement import-routes-bgp-<global / vr-name|red/blue >  then default-action reject 
 
*/ BGPv4 import policy facing CHR (drop default route) 
set policy-options policy-statement CHR-IMPORT-V4 term drop-default-v4 from protocol bgp 
set policy-options policy-statement CHR-IMPORT-V4 term drop-default-v4 from route-filter 0.0.0.0/0 exact 
set policy-options policy-statement CHR-IMPORT-V4 term drop-default-v4 then reject 
set policy-options policy-statement CHR-IMPORT-V4 then default-action accept 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
82 
Configure BGP Import Policy IPV6 
 
*/ for CP, UP, inet6.0 (CHR/CSR RAN MGT) V6 expect to receive default 
route v6 if in VRF available, if not full table to be accept 
 
set policy-options policy-statement import-routes-bgpv6-<global /vr-name|red/blue >  term default-v6 from 
protocol bgp 
set policy-options policy-statement import-routes-bgpv6-<global / vr-name|red/blue >  term default-v6 from 
 route-filter ::/0  exact 
# to control CSR route-table size to receive default 
route 
set policy-options policy-statement import-routes-bgpv6-<global / vr-name|red/blue >  term default-v6  then 
accept 
set policy-options policy-statement import-routes-bgpv6-<global / vr-name|red/blue >  term default-v6 then local-
preference <120 or 80> 
*/ local-preference ‘120’ for red path, ‘80’ for blue path 
 
*/ when there is no default route (ex. OAM) on  RE/SE VRF/VPRN 
instance, import full routes 
set policy-options policy-statement import-routes-bgpv6-<global /vr-name|red/blue >  term full-v6 from protocol 
bgp 
set policy-options policy-statement import-routes-bgpv6-<global / vr-name|red/blue >  term full-v6  then accept 
set policy-options policy-statement import-routes-bgpv6-<global / vr-name|red/blue >  term full-v6 then local-
preference <120 or 80> 
*/ local-preference ‘120’ for red path, ‘80’ for blue path 
 
set policy-options policy-statement import-routes-bgpv6-<global / vr-name|red/blue >  then default-action reject 
 
 
*/ BGPv6 import policy facing CHR (drop default route) 
set policy-options policy-statement CHR-IMPORT-V6 term drop-default-v6 from protocol bgp 
set policy-options policy-statement CHR-IMPORT-V6 term drop-default-v6 from route-filter ::/0 exact 
set policy-options policy-statement CHR-IMPORT-V6 term drop-default-v6 then reject 
set policy-options policy-statement CHR-IMPORT-V6 then default-action accept 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
83 
Configure BGP Export Policy IPV4 
 
*/ Create separate export policy BGPv4 to each global/VR, advertise 
routes to RE 
*/ Same export policy template for RED and BLUE path, route-filter 
content will not be the same per VR 
  
*/ reject direct connected interfaces for that routing layer (ex. PWN 
P2P subnet) 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue >  term DROP-PRAN from 
protocol direct 
*/  to control direct prefix to advertise to next hop RE/SE 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue > term DROP-PRAN from 
route-filter <IP_subnet/prefix> exact   
  . 
  . 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue > term DROP-PRAN  from 
route-filter <IP_subnet/prefix> exact 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue > term DROP-PRAN  then 
reject 
 
*/ allow direct connected interfaces for that routing layer 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue >  term DIRECT from protocol 
direct 
 
 */  to control direct prefix to advertise to next hop RE/SE 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue > term DIRECT  from route-
filter <IP_subnet/prefix> exact   
  . 
  . 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue > term DIRECT   from route-
filter <IP_subnet/prefix> exact 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue > term DIRECT   then accept 
 
*/ allow static routes for that routing layer 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue > term STATIC from protocol 
static 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name |red/blue > term STATIC  from route-
filter <IP_subnet/prefix>  exact 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name|red/blue > term STATIC  then accept 
set policy-options policy-statement export-routes-bgpv4-<global / vr-name |red/blue > then default-action reject 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
84 
Configure BGP Export Policy IPV6 
 
*/ Create separate export policy BGPv6 to each global/VR, advertise 
routes to RE 
*/ Same export policy template for RED and BLUE path, route-filter 
content will not be the same per VR 
  
*/ reject direct connected interfaces for that routing layer 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue >  term DROP from protocol 
direct 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue > term DROP  from route-
filter <IP_subnet/prefix> exact 
  . 
  . 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue > term DROP  from route-
filter <IP_subnet/prefix> exact 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue > term DROP then reject 
 
*/ allow direct connected interfaces for that routing layer 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue >  term DIRECT from protocol 
direct 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue > term DIRECT  from route-
filter <IP_subnet/prefix> exact 
  . 
  . 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue > term DIRECT  from route-
filter <IP_subnet/prefix> exact 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue > term DIRECT  then accept 
  
*/ allow static routes for that routing layer 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue > term STATIC  from protocol 
static 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name |red/blue > term STATIC  from route-
filter <IP_subnet/prefix>  exact 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name|red/blue > term STATIC  then accept 
set policy-options policy-statement export-routes-bgpv6-<global / vr-name |red/blue > then default-action reject 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
85 
Configure BGP Routing Protocol Global (inet.0 & inet6.0) 
 
*/create global BGPv4 routing 
set routing-options autonomous-system <local AS#> 
set routing-options router-id lo0.0-IPV4-address 
set protocols bgp group csr-global type external 
set protocols bgp group csr-global traceoptions file <bgp-global> 
set protocols bgp group csr-global traceoptions file size 500k 
set protocols bgp group csr-global traceoptions flag all 
deactivate protocols bgp group csr-global traceoptions 
*/ optional traceoptions and use 
it only for troubleshootings 
set protocols bgp group csr-global description "global csr layer" 
set protocols bgp group csr-global type external 
set protocols bgp group csr-global family inet unicast 
set protocols bgp group csr-global hold-time 45 
set protocols bgp group csr-global authentication-key  <secret> 
set protocols bgp group csr-global peer-as 852 
set protocols bgp group csr-global local-as <local AS#>   */ if autonomous-system being defined, this line  can 
be skipped 
*/ Apply red path, and apply import and export policy 
set protocols bgp group csr-global neighbor <RED-RE-IP-address>   import  Import-routes-bgpv4-<global red >  
set protocols bgp group csr-global neighbor <RED-RE-IP-address>  export   export-routes-bgpv4-<global  red >  
*/ Apply blue path only if available, and apply import and export policy 
set protocols bgp group csr-global neighbor <BLUE-RE-IP-address>  import  Import-routes-bgp-<global blue >  
set protocols bgp group csr-global neighbor <BLUE-RE-IP-address>  export   export-routes-bgp-<global  blue >  
  
*/create global BGPv6 routing 
 
set routing-options autonomous-system <local AS#> 
set routing-options router-id lo0.0-IPV4-address 
set protocols bgp group csr-global type external 
set protocols bgp group csr-global traceoptions file <bgp-global> 
set protocols bgp group csr-global traceoptions file size 500k 
set protocols bgp group csr-global traceoptions flag all 
deactivate protocols bgp group csr-global traceoptions 
*/ optional traceoptions and use 
it only for troubleshootings 
set protocols bgp group csr-global-v6 description "global csr layer" 
set protocols bgp group csr-global-v6  type external 
set protocols bgp group csr-global-v6  family inet6 unicast 
set protocols bgp group csr-global-v6  hold-time 45 
set protocols bgp group csr-global-v6  authentication-key  <secret> 
set protocols bgp group csr-global-v6  peer-as 852 
set protocols bgp group csr-global-v6  local-as <local AS#>   */ if autonomous-system being 
defined, this line  can be skipped 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
86 
*/ Apply red path, and apply import and export policy 
set protocols bgp group csr-global neighbor <RED-RE-IP-address>   import  Import-routes-bgpv4-<global red >  
set protocols bgp group csr-global neighbor <RED-RE-IP-address>  export   export-routes-bgpv4-<global  red >  
*/ Apply blue path only if available, and apply import and export policy 
set protocols bgp group csr-global neighbor <BLUE-RE-IP-address>  import  Import-routes-bgp-<global blue >  
set protocols bgp group csr-global neighbor <BLUE-RE-IP-address>  export   export-routes-bgp-<global  blue >  
Configure Static Route - Global Layer 
  
*/ create static routes  to point to eNode B   loopback  interface, OR 
*/ static routes can be used for hub-spoke CSR scenario 
set routing-options static route <ip_subnet/prefix> next-hop < ip_address> metric 80 
  
  
 
Configure Static Route - Global Layer IPV6 
  
*/ create static routes  to point to eNode B   loopback  interface, OR 
*/ static routes can be used for hub-spoke CSR scenario 
set routing-options rib inet6.0 static route  <ipv6_subnet/prefix>  next-hop < ipv6_address> metric 80 
 
Configure Static Route - Virtual Router  IPV4 
  
*/ create static routes  to point to eNode B   loopback  interface, OR 
*/ static routes can be used for hub-spoke CSR scenario 
set routing-instances <VR-NAME> routing-options static route <ip_subnet/prefix> next-hop < ip_address> metric 
80 
 
Configure Static Route – Virtual Router  IPV6 
  
*/ create static routes  to point to eNode B   loopback  interface, OR 
*/ static routes can be used for hub-spoke CSR scenario 
set routing-instances <VR-NAME> routing-options rib  <VR-NAME> .inet6.0 static route  <ipv6_subnet/prefix>  
next-hop < ipv6_address> metric 80 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
87 
Configure Routing Instance Virtual Router and BGP Protocol 
  
*/create routing-instance (VR) 
set routing-instances <VR-NAME> instance-type virtual-router 
  
*/Associate Interfaces to this routing-instance (VRF), ex. WAN, LAN, VLAN, LP etc. 
set routing-instances <VR-NAME> interface et-0/0/x.x   */if any LAN, WAN  L3 interfaces 
. 
. 
set routing-instances <VR-NAME> interface irb.x  
*/if any vlan L3 interface under a VR 
  
*/create  static routes within a routing-instance (VR) refer to static route section 
  
*/configure BGPv4  under routing-instance 
set routing-instances <VR-NAME> protocols bgp group <VR-group-NAME> type external 
set routing-instances <VR-NAME>  protocols bgp group < VR-group-NAME > traceoptions file <bgp-
VPN1> 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > traceoptions file size 500k 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > traceoptions flag all 
deactivate routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > traceoptions 
*/ deactivate traceoptions and use it only for troubleshootings 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > family inet unicast 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > description "CSR to <RE>" 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > hold-time 45 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > authentication-key <secret> 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > peer-as 852 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > local-as <AS#> */ if 
autonomous-system being defined, this line  can be skipped 
  
  
*/configure red ebgp neighbor under routing-instance, and apply routes import/export policy 
set routing-instances <VRF-NAME> protocols bgp group < VR-group-NAME > neighbor <RED-RE-IP-
address> import  Import-routes-bgp-<vr-x-red >  
set routing-instances <VRF-NAME> protocols bgp group < VR-group-NAME > neighbor <RED-RE-IP-
address>  export export-routes-bgp-<vr-x-red> 
  
  
*/configure blue  ebgp neighbor under routing-instance, if applicable 
set routing-instances <VRF-NAME> protocols bgp group < VR-group-NAME > neighbor <BLUE-RE-IP-
address> import  Import-routes-bgp-<vrf-x-blue >  
set routing-instances <VRF-NAME> protocols bgp group < VR-group-NAME > neighbor <BLUE-RE-IP-
address> export export-routes-bgp-<vrf-x-blue> 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
88 
*/configure BGPv6  under routing-instance 
*/create routing-instance (VR) 
set routing-instances <VR-NAME> instance-type virtual-router 
set routing-instances <VR-NAME> routing option x.x.x.x   # any random IPV4 as router-id  or use CSR 
loopback IP, need for IPV6 only VR 
set routing-instances <VR-NAME> protocols bgp group <VR-group-NAME> type external 
set routing-instances <VR-NAME>  protocols bgp group < VR-group-NAME > traceoptions file <bgp-
VPN1> 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > traceoptions file size 500k 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > traceoptions flag all 
deactivate routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > traceoptions 
*/ deactivate traceoptions and use it only for troubleshootings 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > family inet6 unicast 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > description "CSR to <RE>" 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > hold-time 45 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > authentication-key <secret> 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > peer-as 852 
set routing-instances <VR-NAME> protocols bgp group < VR-group-NAME > local-as <AS#> */ if 
autonomous-system being defined, this line  can be skipped 
  
  
*/configure red ebgp neighbor under routing-instance, and apply routes import/export policy 
set routing-instances <VRF-NAME> protocols bgp group < VR-group-NAME > neighbor <RED-RE-IP-
address> import  Import-routes-bgp-<vr-x-v6-red >  
set routing-instances <VRF-NAME> protocols bgp group < VR-group-NAME > neighbor <RED-RE-IP-
address>  export export-routes-bgp-<vr-x-v6-red> 
  
  
*/configure blue  ebgp neighbor under routing-instance, if applicable 
set routing-instances <VRF-NAME> protocols bgp group < VR-group-NAME > neighbor <BLUE-RE-IP-
address> import  Import-routes-bgp-<vrf-x-v6-blue >  
set routing-instances <VRF-NAME> protocols bgp group < VR-group-NAME > neighbor <BLUE-RE-IP-
address> export export-routes-bgp-<vrf-x-v6-blue> 
Rakuten POC CSR to Cisco CHR configuration 
 
VLAN 
Use cases 
Description 
6x 
CHRs 
 Available VLAN range for hub-router (CHR) use 
7x 
CHRs 
 Available VLAN range for hub-router (CHR) use 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
89 
 
# due to native vlan requirement to support ZTP, port cfg change to Ethernet-switching 
set vlans CHR3-CP-V61 vlan-id 61 
set vlans CHR3-CP-V61 l3-interface irb.61 
set vlans CHR3-OAM-NATIVE-V63 vlan-id 63               # use as common native vlan for Cisco CHR 
set vlans CHR3-OAM-NATIVE-V63 l3-interface irb.63 
set vlans CHR3-UP-V62 vlan-id 62 
set vlans CHR3-UP-V62 l3-interface irb.62 
 
set interfaces et-0/0/x  description port description 
set interfaces et-0/0/x  hierarchical-scheduler 
set interfaces et-0/0/x  native-vlan-id 63 
set interfaces et-0/0/x  speed 1g/10g/25g   # select the SFP speed in use 
set interfaces et-0/0/x  mtu 9216 
set interfaces et-0/0/x  ether-options no-flow-control 
set interfaces et-0/0/x  unit 0 description port description 
set interfaces et-0/0/x  unit 0 family ethernet-switching interface-mode trunk 
set interfaces et-0/0/x  unit 0 family ethernet-switching vlan members CHR3-CP-V61 
set interfaces et-0/0/x  unit 0 family ethernet-switching vlan members CHR3-UP-V62 
set interfaces et-0/0/x unit 0 family ethernet-switching vlan members CHR3-OAM-NATIVE-V63   
 
# configure v4/v6 per vlan, irb interfaces 
set interfaces irb unit 61 family inet6 address ?:1/64   #CP IPV6  
set interfaces irb unit 62 family inet6 address ?:1/64   #UP IPV6 
set interfaces irb unit 63 family inet address IPV4/30   #OAM IPV4/IPV6 
set interfaces irb unit 63 family inet6 address ?:1/64 
 #bind irb interfaces to corresponded VR, and IRB of OAM leave it at inet.0 to reach RAN-MGT/TM-RAN 
set routing-instances NG-RAN-CP interface irb.61 
set routing-instances NG-RAN-UP interface irb.64 
  
 
 
#add irb to COS 
set class-of-service interfaces irb unit 6x classifiers dscp LTE-SERVICE  #existing classifier in CSR 
set class-of-service interfaces ge|xe-x/x/x  scheduler-map LTE_66_21_13  #existing scheduler in CSR 
  
# BGP of inet.0/inet6.0 for RAN-MGT(TM-RAN) facing RE 
Refer to BGP configuration section: BGP protocol configuration section 
  
# BGPv4 import policy facing CHR 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
90 
set policy-options policy-statement CHR-IMPORT-V4 term drop-default-v4 from protocol bgp 
set policy-options policy-statement CHR-IMPORT-V4 term drop-default-v4 from route-filter 0.0.0.0/0 
exact 
set policy-options policy-statement CHR-IMPORT-V4 term drop-default-v4 then reject 
set policy-options policy-statement CHR-IMPORT-V4 then default-action accept 
  
# BGPv6 import policy facing CHR (drop default route) 
set policy-options policy-statement CHR-IMPORT-V6 term drop-default-v6 from protocol bgp 
set policy-options policy-statement CHR-IMPORT-V6 term drop-default-v6 from route-filter ::/0 exact 
set policy-options policy-statement CHR-IMPORT-V6 term drop-default-v6 then reject 
set policy-options policy-statement CHR-IMPORT-V6 then default-action accept 
  
# BGP of inet.0/inet6.0 for RAN-MGT(TM-RAN) facing CHR 
# Insert the BGP to CHR group into existing BGP protocol 
set protocols bgp group OAM-CHR type external 
set protocols bgp group OAM-CHR hold-time 45 
set protocols bgp group OAM-CHR log-updown 
set protocols bgp group OAM-CHR import CHR-IMPORT-V6  # accept all route, excluded default route 
set protocols bgp group OAM-CHR family inet6 unicast 
set protocols bgp group OAM-CHR peer-as 65xxx 
# private AS of CHR 
set protocols bgp group OAM-CHR neighbor IPV6-address  description "description-CHR-1 OAM" 
set protocols bgp group OAM-CHR neighbor IPV6-address  authentication-key ? 
set protocols bgp group OAM-CHR neighbor IPV6-address  description "description-CHR-2 OAM" 
set protocols bgp group OAM-CHR neighbor IPV6-address  authentication-key ? 
  
# OAM dhcpv6 relay (on hold) 
set forwarding-options dhcp-relay dhcpv6 group ORAN-ZTP active-server-group ZTP-DHCP-SVR 
set forwarding-options dhcp-relay dhcpv6 group ORAN-ZTP interface irb.6x 
set forwarding-options dhcp-relay dhcpv6 group ORAN-ZTP interface irb.6y 
set forwarding-options dhcp-relay dhcpv6 server-group ZTP-DHCP-SVR  SERVER-IPV6-ADDR 
  
# BGP of NG-RAN-CP, or NG-RAN-UP facing RE 
Refer to BGP configuration section:  VR BGP protocol configuration section 
  
  
set routing-instances VR-NAME instance-type virtual-router 
             . 
             . 
set routing-instances VR-NAME interface vlan.6x 
set routing-instances VR-NAME routing-options router-id x.x.x.x   # any random IPV4 as router-id  or use 
CSR loopback IP, need for IPV6 only VR 
set routing-instances VR-NAME protocols bgp group VR-NAME-V6-CHR type external 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
91 
set routing-instances VR-NAME protocols bgp group VR-NAME-V6-CHR hold-time 45 
set routing-instances VR-NAME protocols bgp group VR-NAME-V6-CHR log-updown 
set routing-instances VR-NAME protocols bgp group VR-NAME-V6-CHR family inet6 unicast 
set routing-instances VR-NAME protocols bgp group VR-NAME-V6-CHR peer-as ASN 
set routing-instances VR-NAME protocols bgp group VR-NAME-V6-CHR import 
set routing-instances VR-NAME protocols bgp group VR-NAME-V6-CHR authentication-key ? 
set routing-instances VR-NAME protocols bgp group VR-NAME-V6-CHR neighbor IPV6-PEER description 
"to CHR1-CP|UP" 
  
 
  
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
92 
POC CSR to Ciena CHR configuration 
 
*/ interface setup refer back to interface section;   
*/ VLAN 61 (or subject to NCD assignment) for NG-RAN-CP instance  
*/ VLAN 62 (or subject to NCD assignment) for NG-RAN-UP instance  
*/ VLAN 127   for both gNode B IPV6 OAM and  global (RAN-MGT)  instance  
 
 # bind   interfaces to corresponded VR, and CHR MGT leave it at inet.0 to reach RAN-MGT/TM-RAN 
set routing-instances NG-RAN-CP interface et-0/0/x.<id>  
set routing-instances NG-RAN-UP interface et-0/0/x.<id> 
  
    
# interface binding to COS 
set class-of-service interfaces et-0/0/x unit <id> classifiers dscp MBH_V4  #existing classifier in CSR 
set class-of-service interfaces et-0/0/x unit <id> classifiers dscp-ipv6 MBH_V6 # IPV6 classifier in CSR 
set class-of-service interfaces et-0/0/x  output-traffic-control-profile MBH_<speed>G  #existing 
scheduler in CSR 
  
  
# BGPv4 import policy facing CHR 
set policy-options policy-statement CHR-IMPORT-V4 term drop-default-v4 from protocol bgp 
set policy-options policy-statement CHR-IMPORT-V4 term drop-default-v4 from route-filter 0.0.0.0/0 
exact 
set policy-options policy-statement CHR-IMPORT-V4  term drop-default-v4 then reject 
set policy-options policy-statement CHR-IMPORT-V4  then default-action accept 
  
# BGPv6 import policy facing CHR (drop default route) 
set policy-options policy-statement CHR-IMPORT-V6 term drop-default-v6 from protocol bgp 
set policy-options policy-statement CHR-IMPORT-V6 term drop-default-v6 from route-filter ::/0 exact 
set policy-options policy-statement CHR-IMPORT-V6 term drop-default-v6 then reject 
set policy-options policy-statement CHR-IMPORT-V6 then default-action accept 
  
  
# BGP of NG-RAN-CP, or NG-RAN-UP  facing RE/SE 
Refer to BGPv4/v6 configuration section:  VR BGP protocol configuration section 
  
  
  
 # add BGPV4 CHR-PEER, for CP or UP to corresponded VR 
set routing-instances VR-NAME instance-type virtual-router 
             . 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
93 
             . 
set routing-instances VR-NAME interface ge-|xe-0/x/x.<id>  
  
set routing-instances VR-NAME protocols bgp group VR-NAME-V4-CHR type external 
set routing-instances VR-NAME protocols bgp group VR-NAME-V4-CHR hold-time 45 
set routing-instances VR-NAME protocols bgp group VR-NAME-V4-CHR log-updown 
set routing-instances VR-NAME protocols bgp group VR-NAME-V4-CHR family inet unicast 
set routing-instances VR-NAME protocols bgp group VR-NAME-V4-CHR peer-as ASN 
set routing-instances VR-NAME protocols bgp group VR-NAME-V4-CHR import CHR-IMPORT-V4 
set routing-instances VR-NAME protocols bgp group VR-NAME-V4-CHR authentication-key ? 
set routing-instances VR-NAME protocols bgp group VR-NAME-V4-CHR neighbor IPV4-PEER description 
"to CHR?-CP|UP" 
  
  
# Export direct only for IPV4 of inet.0, and IPV6 of inet6.0 with BGPV6 for CHR MGT (TM-RAN) facing RE 
  
# CSR inet.6.0  BGP with CHR global instance 
Set routing-options router-id x.x.x.x   # any random IPV4 as router-id  or use CSR loopback IP, need for 
IPV6   
set protocols bgp group NAME-V6-CHR type external 
set protocols bgp group NAME-V6-CHR hold-time 45 
set protocols bgp group NAME-V6-CHR log-updown 
set protocols bgp group NAME-V6-CHR family inet6 unicast 
set protocols bgp group NAME-V6-CHR peer-as ASN 
set protocols bgp group NAME-V6-CHR import CHR-IMPORT-V6 
set protocols bgp group NAME-V6-CHR authentication-key ? 
set protocols bgp group NAME-V6-CHR neighbor IPV6-PEER description "to CHR?-OAM" 
  
  
# OAM dhcpv6 relay (on hold) 
set forwarding-options dhcp-relay dhcpv6 group ORAN-ZTP active-server-group ZTP-DHCP-SVR 
set forwarding-options dhcp-relay dhcpv6 group ORAN-ZTP interface ge-|xe-0/x/x.<id> 
set forwarding-options dhcp-relay dhcpv6 group ORAN-ZTP interface ge-|xe-0/x/x.<id> 
set forwarding-options dhcp-relay dhcpv6 server-group ZTP-DHCP-SVR SERVER-IPV6-ADDR 
  
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
94 
BGP Peering with SDWAN Device : CSR Backup Path 
  
# SDWAN does not support IPV6 
 
# create interface refer to set interface section 
 
# BGP Import policy 
set policy-options community NO-EXPORT members no-export 
  
set policy-options policy-statement IMPORT-LP60-NO-EXP term A from protocol bgp 
set policy-options policy-statement IMPORT-LP60-NO-EXP term A then local-preference 60 
set policy-options policy-statement IMPORT-LP60-NO-EXP term A then community set NO-EXPORT 
set policy-options policy-statement IMPORT-LP60-NO-EXP term A then accept 
set policy-options policy-statement IMPORT-LP60-NO-EXP then default-action reject 
  
# BGP Export policy 
set policy-options policy-statement exp-sat-cp|up|oam|tm-ran|ip-alarm term A from protocol direct 
set policy-options policy-statement exp-sat-cp|up|oam|tm-ran|ip-alarm term A then as-path-prepend 
"6xxxx 6xxxx 6xxxx 6xxxx" 
set policy-options policy-statement exp-sat-cp|up|oam|tm-ran|ip-alarm term A then accept 
  
set policy-options policy-statement exp-sat-cp|up|oam|tm-ran|ip-alarm term B from protocol static 
set policy-options policy-statement exp-sat-cp|up|oam|tm-ran|ip-alarm term B then as-path-prepend 
"6xxxx 6xxxx 6xxxx 6xxxx" 
set policy-options policy-statement exp-sat-cp|up|oam|tm-ran|ip-alarm term B then accept 
set policy-options policy-statement exp-sat-cp|up|oam|tm-ran|ip-alarm then default-action reject 
  
  
# Add BGP peer of SDWAN onto existing routing-instance  cp|up|oam|tm-ran|ip-alarm 
  
set routing-instances NG-RAN-CP|UP|OAM|IP-ALARM protocols bgp group sat-ipv4 type external 
set routing-instances NG-RAN-CP|UP|OAM|IP-ALARM protocols bgp group sat-ipv4 family inet unicast 
set routing-instances NG-RAN-CP|UP|OAM|IP-ALARM protocols bgp group sat-ipv4 peer-as 6xxxx 
set routing-instances NG-RAN-CP|UP|OAM|IP-ALARM protocols bgp group sat-ipv4 neighbor <PEER-IP> 
description "to SAT SDWAM CP|UP|OAM|TM-RAN|IP_ALARM" 
set routing-instances NG-RAN-CP|UP|OAM|IP-ALARM protocols bgp group sat-ipv4 neighbor <PEER-IP> 
hold-time 45 
set routing-instances NG-RAN-CP|UP|OAM|IP-ALARM protocols bgp group sat-ipv4 neighbor <PEER-IP> 
log-updown 
set routing-instances NG-RAN-CP|UP|OAM|IP-ALARM protocols bgp group sat-ipv4 neighbor <PEER-IP> 
import IMPORT-LP60-NO-EXP 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
95 
set routing-instances NG-RAN-CP|UP|OAM|IP-ALARM protocols bgp group sat-ipv4 neighbor <PEER-IP> 
export exp-sat-cp|up|oam|ip-alarm 
  
  
# Add BGP peer of SDWAN onto existing inet for CSR MGT 
set  protocols bgp group sat-ipv4 type external 
set  protocols bgp group sat-ipv4 family inet unicast 
set  protocols bgp group sat-ipv4 peer-as 6xxxx 
set  protocols bgp group sat-ipv4 neighbor <PEER-IP> description "to SAT  TM-RAN" 
set  protocols bgp group sat-ipv4 neighbor <PEER-IP> hold-time 45 
set  protocols bgp group sat-ipv4 neighbor <PEER-IP> log-updown 
set  protocols bgp group sat-ipv4 neighbor <PEER-IP> import IMPORT-LP60-NO-EXP 
set  protocols bgp group sat-ipv4 neighbor <PEER-IP> export exp-sat-TM-RAN 
 
# interface binding to COS 
set class-of-service interfaces et-0/0/x unit <id> classifiers dscp MBH_V4  #existing classifier in CSR 
set class-of-service interfaces et-0/0/x unit <id> classifiers dscp-ipv6 MBH_V6 # IPV6 classifier in CSR 
set class-of-service interfaces et-0/0/x  output-traffic-control-profile MBH_<speed>G  #existing 
scheduler in CSR 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
96 
Indoor Small Cell/ IP-CAMS Related configuration 
 
*/ Please ensure global routing layer and management configuration has 
enabled prior to create new VR for indoor SC service 
  
*/ create VLAN (id=40 recommendation) for Small Cells 
*/ create VLAN (id=80 recommendation) for IP-CAMS 
  
set vlans  SC-LAN|IP-CAMS  vlan-id  40|80 
set vlans  SC-LAN|IP-CAMS  l3-interface irb.40|80 
set protocols l2-learning global-mac-table-aging-time  300 
  
set interfaces irb unit 40|80 description <description> 
set interfaces irb unit 40|80  family inet address <public_ip_address/prefix> 
set interfaces irb unit 40|80  family inet6 address <public_ipv6_address/prefix> 
  
  
*/ access port configuration for port facing SC/Pico/IP-CAMS 
set interfaces et-0/0/x description "Huawei SC dhcp client/IP-CAMS" 
set interfaces et-0/0/x hierarchical-scheduler 
set interfaces et-0/0/x mtu 9216 
set interfaces et-0/0/x speed 1g/10g/25g  # refer to SFP speed 
set interfaces et-0/0/x ether-options no-flow-control 
set interfaces et-0/0/x unit 0 family ethernet-switching interface-mode access 
set interfaces et-0/0/x unit 0 family ethernet-switching vlan members SC-LAN|IP-CAMS 
 
# interface binding to COS 
set class-of-service interfaces et-0/0/x unit <id> classifiers dscp MBH_V4  #existing classifier in CSR 
set class-of-service interfaces et-0/0/x unit <id> classifiers dscp-ipv6 MBH_V6 # IPV6 classifier in CSR 
set class-of-service interfaces et-0/0/x  output-traffic-control-profile MBH_<speed>G  #existing 
scheduler in CSR 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
97 
Configure Firewall Filter – ANTI-SPOOFING AT CSR WAN Sub-Interfaces 
 
 
 
*/ Input to firewall filter, PUBLIC IP subnet for SC-LAN(vlan 40) 
  
set policy-options prefix-list local-inet-subnets  <local-inet-subnets/prefix> 
  
set firewall family inet filter ANTI-SPOOF term SC-LAN from source-prefix-list local-inet-subnets 
set firewall family inet filter ANTI-SPOOF term SC-LAN then discard 
set firewall family inet filter ANTI-SPOOF term SC-LAN-ACPT then accept 
  
*/ bind firewall filter input to WAN sub-interfaces 
*/(vlan xxx & vlan yyy) 
  
set interfaces et-0/0/x unit <number> family inet  filter input  ANTI-SPOOF 
 
# interface binding to COS 
set class-of-service interfaces et-0/0/x unit <id> classifiers dscp MBH_V4  #existing classifier in CSR 
set class-of-service interfaces et-0/0/x unit <id> classifiers dscp-ipv6 MBH_V6 # IPV6 classifier in CSR 
set class-of-service interfaces et-0/0/x  output-traffic-control-profile MBH_<speed>G  #existing 
scheduler in CSR 
Configure DHCP server in SC-INET VR 
 
# Enable dhcp server for pico cell PnP and Pico service use IES service  
 
set routing-instances sc-inet instance-type virtual-router 
set routing-instances sc-inet description <description> 
set routing-instances sc-inet system services dhcp-local-server group local-sc-pool interface irb.40 
set routing-instances sc-inet access address-assignment pool sc-pool-1 family inet network 
<public_IP_subnet/prefix>  */ of vlan 40 
set routing-instances sc-inet access address-assignment pool sc-pool-1 family inet range range1 low 
<public_IP_address(low)>  
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
98 
set routing-instances sc-inet access address-assignment pool sc-pool-1 family inet range range1 high 
<public_IP_address(high)>  
set routing-instances sc-inet access address-assignment pool sc-pool-1 family inet dhcp-attributes 
maximum-lease-time 259200 */ lease time 3 days 
set routing-instances sc-inet access address-assignment pool sc-pool-1 family inet dhcp-attributes name-
server <x.x.x.x>  */Inet DNS1 
set routing-instances sc-inet access address-assignment pool sc-pool-1 family inet dhcp-attributes name-
server <x.x.x.x> */Inet DNS2 
set routing-instances sc-inet access address-assignment pool sc-pool-1 family inet dhcp-attributes router 
<public_IP_address>  */vlan 40 IP as default GW 
set routing-instances sc-inet access address-assignment pool sc-pool-1 family inet dhcp-attributes 
option 3 ip-address <public_IP_address>  */vlan 40 IP as default GW 
  
set routing-instances sc-inet interface et-0/0/x.2xxx 
set routing-instances sc-inet interface et-0/0/x.3xxx 
set routing-instances sc-inet interface irb.40 
 
 
# For VR BGP configuration and import/export policy, please refer to section configure VR BGP. 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
99 
Enable IPV4 DHCP-Relay function on a Virtual Routing Instance 
  
*/ MBH LTE-OAM example: 
*/ SON PnP currently limits to microcell eNode B, and apply to LTE OAM 
*/ routing instance only 
*/ Insert the followings to LTE OAM routing-instance 
*/ configuration 
*/ Huawei OAM =154.11.34.6 (try to reconfirm with RF OPS !) 
set routing-instances <LTE-OAM>  forwarding-options dhcp-relay server-group <M2000>  154.11.34.6 
set routing-instances <LTE-OAM>  forwarding-options dhcp-relay group eNodeB active-server-group 
<M2000>  
  
*/ CSR OAM GW interfaces 
set routing-instances <LTE-OAM>   forwarding-options dhcp-relay group eNodeB interface et-0/0/x.10 
. 
. 
set routing-instances <LTE-OAM>   forwarding-options dhcp-relay group eNodeB interface et-0/0/x.10 
 
 
Enable IPV6 DHCP-Relay function on a Global inet6.0 Instance 
 
*/Application mainly for CHR ZTP 
 
set forwarding-options dhcp-relay dhcpv6 group ORAN-ZTP active-server-group ZTP-DHCP-SVR 
set forwarding-options dhcp-relay dhcpv6 group ORAN-ZTP interface  et-0/0/x.x 
. 
. 
set forwarding-options dhcp-relay dhcpv6 group ORAN-ZTP interface  et-0/0/x.x 
set forwarding-options dhcp-relay dhcpv6 server-group ZTP-DHCP-SVR  <SERVER-IPV6-ADDR> 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
100 
Configure X2-C/U static route with high metric via existing CP/UP 
uplink BGP export policy 
 
# this prefix-list can be shared between CP *& UP export policy 
set policy-options prefix-list HUAWEI-X2-LBS HUAWEI-eNB-LOOPBACK-IP/32 
  
#On existing BGP CP EXPORT policy 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP term DIRECT from protocol direct 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP term DIRECT then accept 
<insert here before current term for static route> 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP term X2C-STATIC  from protocol 
static 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP term X2C-STATIC  from prefix-list 
HUAWEI-X2-LBS 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP term X2C-STATIC  then metric add 
100000 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP term X2C-STATIC  then accept 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP term STATIC from protocol static 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP term STATIC then accept 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP then default-action reject 
  
  
#On existing BGP UP EXPORT policy 
set policy-options policy-statement Export-routes-bgp-NG_RAN_UP term DIRECT from protocol direct 
set policy-options policy-statement Export-routes-bgp-NG_RAN_UP term DIRECT then accept 
<insert here before current term for static route > 
set policy-options policy-statement Export-routes-bgp-NG_RAN_UP term X2U-STATIC  from protocol 
static 
set policy-options policy-statement Export-routes-bgp-NG_RAN_UP term X2U-STATIC  from prefix-list 
HUAWEI-X2-LBS 
set policy-options policy-statement Export-routes-bgp-NG_RAN_UP term X2U-STATIC  then metric add 
100000 
set policy-options policy-statement Export-routes-bgp-NG_RAN_CP term X2U-STATIC  then accept 
set policy-options policy-statement Export-routes-bgp-NG_RAN_UP term STATIC from protocol static 
set policy-options policy-statement Export-routes-bgp-NG_RAN_UP term STATIC then accept 
set policy-options policy-statement Export-routes-bgp-NG_RAN_UP then default-action reject 
  
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
101 
Private RAN Configuration 
 
#BGP Import policy – facing PIOT 
  
set policy-options community  clear_all members *:* 
set policy-options community NO-EXPORT members no-export    
# tagged no-export community for all routes in from PIOT routing environment  
  
set policy-options policy-statement PIOT-IPS-IMP term ING-NO-EXP from protocol bgp 
set policy-options policy-statement PIOT-IPS-IMP term ING-NO-EXP then community set NO-EXPORT 
set policy-options policy-statement PIOT-IPS-IMP term ING-NO-EXP then accept 
set policy-options policy-statement PIOT-IPS-IMP then default-action reject 
  
#BGP export policy – facing PIOT 
  
# create prefix-list to filter eNB routes (both direct and loopback if applicable) 
set policy-options prefix-list PL-CSID-eNB-PIOT-V1100|1500|1600  <<eNB-IP_subnets>> 
. 
. 
set policy-options prefix-list PL-CSID-eNB-PIOT-V1100|1500|1600 <<eNB-IP_subnets>> 
  
# create export policy to set commit no-export on prefixes to CMU 
set policy-options policy-statement PIOT-IPS-CSID-V1100|1500|1600-EXP term EGR-RAN-ROUTES from 
protocol direct 
set policy-options policy-statement PIOT-IPS-CSID-V1100|1500|1600-EXP term EGR-RAN-ROUTES from 
prefix-list-filter PL-CSID-eNB-PIOT-V1100|1500|1600 orlonger 
set policy-options policy-statement PIOT-IPS-CSID-V1100|1500|1600-EXP term EGR-RAN-ROUTES then 
community delete   clear_all 
set policy-options policy-statement PIOT-IPS-CSID-V1100|1500|1600-EXP term EGR-RAN-ROUTES then 
accept 
set policy-options policy-statement PIOT-IPS-CSID-V1100|1500|1600-EXP term EGR-RAN-LB-ROUTES 
from protocol static 
set policy-options policy-statement PIOT-IPS-CSID-V1100|1500|1600-EXP term EGR-RAN-LB-ROUTES 
from prefix-list-filter PL-CSID-eNB-PIOT-V1100|1500|1600 orlonger 
set policy-options policy-statement PIOT-IPS-CSID-V1100|1500|1600-EXP term EGR-RAN-LB-ROUTES 
then community delete   clear_all 
set policy-options policy-statement PIOT-IPS-CSID-V1100|1500|1600-EXP term EGR-RAN-LB-ROUTES 
then accept 
  
set policy-options policy-statement PIOT-IPS-CSID-V1100|1500|1600-EXP then default-action reject 
  
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
102 
Firewall INGRESS filter – facing CMU 
  
set policy-options prefix-list CSID-BGP-V1100|1500|1600  <IPV4-SUBNETS>     # BGP peering  per VRF 
? 
set policy-options prefix-list CMU-CSID-V1100|1500|1600  <IPV4-SUBNETS>  # LOOPBACK IP from CMU 
per VRF 
? 
  
set firewall family inet filter CMU_CSID_V1100|1500|1600-INGR term BGP-IN from source-prefix-list 
CSID-BGP-V1100|1500|1600   
set firewall family inet filter CMU_CSID_V1100|1500|1600-INGR term BGP-IN then accept 
set firewall family inet filter CMU_CSID_V1100|1500|1600-INGR term CMU-IN from source-prefix-list 
CMU-CSID-V1100|1500|1600   
set firewall family inet filter CMU_CSID_V1100|1500|1600-INGR term CMU-IN then accept 
set firewall family inet filter CMU_CSID_V1100|1500|1600-INGR term LAST then discard 
  
Port setting 
  
delete interfaces ge|xe-x/x/x  unit 0     */ delete default L2 FDX, and no link-mode configuration  
set interfaces ge|xe-0/x/x   description "Facing PIOT CMU VLAN ? " 
set interfaces ge|xe-0/x/x   flexible-vlan-tagging 
set interfaces ge|xe-0/x/x   ether-options no-flow-control    
set interfaces ge|xe-0/x/x   ether-options no-auto-negotiation  # ge interface only, not apply to 10G 
set interfaces ge|xe-0/x/x   speed 1g  # xe default 10G, and not require speed configuration 
set interfaces ge|xe-0/x/x   mtu  9216 
set interfaces ge|xe-0/x/x   unit <number> vlan-id <number>    # VLANs : 1100 (CP),1500 
(UP),1600(Legacy) 
set interfaces ge|xe-0/x/x   unit <number> family inet  no-redirects 
set interfaces ge|xe-0/x/x   unit <number> family inet address <sub-interface_ip_address/prefix> 
  
QoS 
set class-of-service interfaces ge|xe-0/x/x   scheduler-map LTE_66_21_13 
set class-of-service interfaces ge|xe-0/x/x   unit  <number>  classifiers dscp LTE-SERVICE 
set class-of-service interfaces ge|xe-0/x/x  unit  <number>    rewrite-rules ieee-802.1 LTE-SERVICE 
  
Firewall Input filter 
set interfaces ge|xe-0/x/x   unit <number> family inet filter input CMU_CSID_V1100|1500|1600-INGR 
  
 
 
 
 
BGP configuration 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
103 
  
# If there is needed to create a new VRF instances 
set routing-instances <instance-name>  instance-type virtual-router 
  
# at CSR edit existing BGP configuration accordingly to vlan and VR association 
edit routing-instances <existing LTE (legacy)> or <CP> or <UP>  # accordingly to VLANs 
<snip> 
  
set interface  ge|xe-0/x/x.<unit>    # bind sub-interfaces to VR 
  
set  protocols bgp group PIOT type external 
set  protocols bgp group PIOT log-updown 
set  protocols bgp group PIOT hold-time 45 
set  protocols bgp group PIOT family inet unicast 
set  protocols bgp group PIOT peer-as <ASN> 
# IXR-1 
set  protocols bgp group PIOT neighbor <PEER-IPV4> description "IXR-1?INFO?" 
set  protocols bgp group PIOT neighbor <PEER-IPV4> import PIOT-IPS-IMP 
set  protocols bgp group PIOT neighbor <PEER-IPV4> export PIOT-IPS-CSID-V1100|1500|1600-EXP 
set  protocols bgp group PIOT neighbor <PEER-IPV4>  bfd-liveness-detection minimum-interval 1000 
set  protocols bgp group PIOT neighbor <PEER-IPV4>  bfd-liveness-detection multiplier 3 
set  protocols bgp group PIOT neighbor <PEER-IPV4>  authentication-key  <secret> 
  
# IXR-2 
set  protocols bgp group PIOT neighbor <PEER-IPV4> description "IXR-2?INFO?" 
set  protocols bgp group PIOT neighbor <PEER-IPV4> import PIOT-IPS-IMP 
set  protocols bgp group PIOT neighbor <PEER-IPV4> export PIOT-IPS-CSID-V1100|1500|1600-EXP 
set  protocols bgp group PIOT neighbor <PEER-IPV4>  bfd-liveness-detection minimum-interval 1000 
set  protocols bgp group PIOT neighbor <PEER-IPV4>  bfd-liveness-detection multiplier 3 
set  protocols bgp group PIOT neighbor <PEER-IPV4>  authentication-key  <secret> 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
104 
Configure Firewall Filter – CSR Control Plane Protection 
  
*/This Firewall Filter applies to Global Routing Layer of CSR 
*/allow OSS Mgt IP subnet 
*/allow SSH from source from RE interface 
*/(adjacent/next hop RE) 
  
*/ create prefix list for OSS subnets 
set policy-options prefix-list oss-subnets  <oss-subnets/prefix> 
set policy-options prefix-list oss-subnets  <oss-subnets/prefix> 
set policy-options prefix-list oss-subnets  <oss-subnets/prefix> 
  
*/ create prefix list for RE subnets (allow ping and BGP peering) 
set policy-options prefix-list oss-subnets  <re-subnets/prefix> 
  
*/ create firewall filter 
set firewall family inet filter PROTECT-RE interface-specific 
set firewall family inet filter PROTECT-RE term Mgt-Access from source-prefix-list oss-subnets 
set firewall family inet filter PROTECT-RE term Mgt-Access from protocol tcp 
set firewall family inet filter PROTECT-RE term Mgt-Access from destination-port ssh 
set firewall family inet filter PROTECT-RE term Mgt-Access then accept 
set firewall family inet filter PROTECT-RE term Mgt-ICMP from protocol icmp  */separate term in 
EVO 
set firewall family inet filter PROTECT-RE term Mgt-ICMP from source-prefix-list oss-subnets 
set firewall family inet filter PROTECT-RE term Mgt-ICMP then accept 
set firewall family inet filter PROTECT-RE term Mgt-SNMP from source-prefix-list oss-subnets 
set firewall family inet filter PROTECT-RE term Mgt-SNMP from protocol udp 
set firewall family inet filter PROTECT-RE term Mgt-SNMP from destination-port snmp 
set firewall family inet filter PROTECT-RE term Mgt-SNMP then accept 
set firewall family inet filter PROTECT-RE term Mgt-NTP-TRUST from source-prefix-list oss-subnets 
set firewall family inet filter PROTECT-RE term Mgt-NTP-TRUST from protocol udp 
set firewall family inet filter PROTECT-RE term Mgt-NTP-TRUST from source-port ntp 
set firewall family inet filter PROTECT-RE term Mgt-NTP-TRUST then accept 
set firewall family inet filter PROTECT-RE term Mgt-NTP-UNTRUST from protocol udp 
set firewall family inet filter PROTECT-RE term Mgt-NTP-UNTRUST from destination-port ntp 
set firewall family inet filter PROTECT-RE term Mgt-NTP-UNTRUST then discard 
set firewall family inet filter PROTECT-RE term other-source from protocol udp 
set firewall family inet filter PROTECT-RE term other-source from protocol tcp 
set firewall family inet filter PROTECT-RE term other-source from destination-port ssh 
set firewall family inet filter PROTECT-RE term other-source from destination-port telnet 
set firewall family inet filter PROTECT-RE term other-source from destination-port snmp 
set firewall family inet filter PROTECT-RE term other-source from destination-port http 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
105 
set firewall family inet filter PROTECT-RE term other-source from destination-port https 
set firewall family inet filter PROTECT-RE term other-source then count INVALID-ACCESS 
set firewall family inet filter PROTECT-RE term other-source then discard 
  
*/Alternative to allow all local system generated traffic 
set firewall family inet filter PROTECT-RE  term last-local-system then accept 
  
*/When without above ‘last-local-system’ them. Apart from OSS MGT, 
system generate traffic will require to have specific rule to allow 
two way communication such as BFD, multihop BGP. User would require to 
add rule if needed 
  
Example: 
  
set policy-options prefix-list allow-transit-subnets <a.b.c.d>/32 
  
set firewall family inet filter PROTECT-RE  term BFD-PEER from source-prefix-list allow-transit-subnets 
set firewall family inet filter PROTECT-RE  term BFD-PEER from protocol udp 
set firewall family inet filter PROTECT-RE  term BFD-PEER then accept 
set firewall family inet filter PROTECT-RE  term MH-BGP from source-prefix-list allow-transit-subnets 
set firewall family inet filter PROTECT-RE  term MH-BGP from protocol tcp 
set firewall family inet filter PROTECT-RE  term MH-BGP then accept 
set firewall family inet filter PROTECT-RE  term last then reject 
  
*/ IPV6 filter TBD  
*/ bind firewall filter protect-RE only to interface loopback0 
set interfaces lo0 unit 0 family inet filter input PROTECT-RE 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
106 
System Capacity Guideline 
Juniper MIBs download URL:  https://apps.juniper.net/mib-
explorer/download?software=Junos%20OS%20Evolved 
 
Module 
Module Name 
OID 
Unit 
Monitoring 
Description 
Jnx-chassis.mib 
(JUNIPER-MIB) 
jnxOperatingCPU 
.1.3.6.1.4.1.2636.
3.1.13.1.8 
percentage 
Green <=60% ; 
Yellow 60-70%; Red 
> 70% 
The CPU utilization 
in percentage of this 
subject.  Zero if 
unavailable or 
inapplicable. 
Jnx-chassis.mib 
(JUNIPER-MIB) 
jnxOperatingMemo
ry 
.1.3.6.1.4.1.2636.
3.1.13.1.15 
Megabytes  
Green <=60% ; 
Yellow 60-70%; Red 
> 70% 
16GB installed 
The installed 
memory size in 
Megabytes  
of this subject.  Zero 
if unavailable or 
Inapplicable. 
 
Jnx-chassis.mib 
(JUNIPER-MIB) 
jnxOperatingBuffer 
.1.3.6.1.4.1.2636.
3.1.13.1.11 
percentage 
Green <=60% ; 
Yellow 60-70%; Red 
> 70% 
The buffer pool 
utilization in 
percentage 
of this subject.  Zero 
if unavailable or  
inapplicable. 
 
Example :  show chassis routing-engine 
Routing Engine status: 
  Slot 0: 
    Current state                  Master 
    Election priority              Master (default) 
    Temperature                 30 degrees C / 86 degrees F 
    CPU temperature             30 degrees C / 86 degrees F 
    DRAM                      10870 MB (16384 MB installed) 
    Memory utilization          33 percent 
    5 sec CPU utilization: 
      User                       7 percent 
      Background                 0 percent 
      Kernel                     6 percent 
      Interrupt                  1 percent 
      Idle                      85 percent 
    1 min CPU utilization: 
      User                       7 percent 
      Background                 0 percent 
      Kernel                     6 percent 
      Interrupt                  1 percent 
      Idle                      87 percent 
    5 min CPU utilization: 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
107 
      User                       7 percent 
      Background                 0 percent 
      Kernel                     6 percent 
      Interrupt                  1 percent 
      Idle                      87 percent 
    15 min CPU utilization: 
      User                       7 percent 
      Background                 0 percent 
      Kernel                     6 percent 
      Interrupt                  1 percent 
      Idle                      87 percent 
    Model                          RE-ACX-7024 
    Serial ID                      FL3822AN0062 
    Start time                     2023-10-11 14:17:00 EDT 
    Uptime                         8 days, 20 hours, 40 minutes, 11 seconds 
    Load averages:                 1 minute   5 minute  15 minute 
                                       1.59       1.27       1.17 
    Last reboot reason             software reboot 
 
 
 JUNIPER-IF-MIB 
(jnx-if-extensions) 
ifIn1SecOctets 
.1.3.6.1.4.1.2636.
3.3.1.1.2 
 
Green <=60% ; 
Yellow 60-70%; Red 
> 70% 
Port Utilization 
inbound 
 
The number of 
octets per second 
(Bps, Bytes per  
second), delivered 
by this (sub-)layer to 
its next 
higher (sub-)layer. 
 JUNIPER-IF-MIB 
(jnx-if-extensions) 
ifOut1SecOctets 
.1.3.6.1.4.1.2636.
3.3.1.1.5 
 
Green <=60% ; 
Yellow 60-70%; Red 
> 70% 
Port Utilization 
outbound 
 
The number of 
octets per second 
(Bps, Bytes per 
second), delivered 
by this (sub-)layer to 
its next 
lower (sub-)layer. 
Example :SRBHONTFUC72> show interfaces et-0/0/4 | match rate 
  Input rate     : 5744 bps (8 pps) 
  Output rate    : 4936 bps (7 pps) 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
108 
 
MIBs for system Monitoring : SNMP TRAPS 
 
Juniper MIBs download URL:  https://apps.juniper.net/mib-
explorer/download?software=Junos%20OS%20Evolved 
 
Module 
Module Name 
OID 
Monitoring 
Description 
BGP4-MIB 
(bgpmib.txt) 
bgpPeerState 
.1.3.6.1.2.1.15.3.1.2 
2 - connect 
3 - active 
(critical)  
 
6 - established 
(Clear) 
The BGP peer 
connection state. 
 
Enumerations: 
1 - idle 
2 - connect 
3 - active 
4 - opensent 
5 - openconfirm 
6 - established 
BGP4-V2-MIB-
JUNIPER 
(jnx-bgpmib2.txt) 
jnxBgpM2BackwardTr
ansition 
.1.3.6.1.4.1.2636.5.1.1
.1.0.2 
Snmp trap 
The 
BGPBackwardTransitio
n Event is generated 
when the BGP FSM 
moves from a higher 
numbered 
state to a lower 
numbered state. 
BGP4-V2-MIB-
JUNIPER 
(jnx-bgpmib2.txt) 
jnxBgpM2Established 
.1.3.6.1.4.1.2636.5.1.1
.1.0.1 
 
6 - established 
(clear) 
The BGP Established 
event is generated 
when 
the BGP FSM enters 
the ESTABLISHED 
state. 
SNMPv2-MIB 
(rfc1907.txt) 
coldStart 
.1.3.6.1.6.3.1.1.5.1 
Snmp trap 
(warning) 
A coldStart trap 
signifies that the 
SNMPv2 entity, acting 
in an agent role, is 
reinitializing itself and 
that its 
configuration may 
have been altered. 
IPV6-MIB
(rfc2465.txt) 
 
ipv6IfOperStatus 
.1.3.6.1.2.1.55.1.5.1.1
0 
Snmp trap 
(critical)  - 2 down 
(clear ) - 1 up 
PORT/INTERFACE 
STATE 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
109 
 
The current 
operational state of 
the interface. 
The noIfIdentifier(3) 
state indicates that no 
valid 
Interface Identifier is 
assigned to the 
interface. 
This state usually 
indicates that the link-
local 
interface address 
failed Duplicate 
Address Detection. 
If ipv6IfAdminStatus is 
down(2) then 
ipv6IfOperStatus 
should be down(2).  If 
ipv6IfAdminStatus is 
changed 
to up(1) then 
ipv6IfOperStatus 
should change to 
up(1) 
if the interface is 
ready to transmit and 
receive 
network traffic; it 
should remain in the 
down(2) or 
noIfIdentifier(3) state 
if and only if there is a 
fault that prevents it 
from going to the 
up(1) state; 
it should remain in the 
notPresent(5) state if 
the interface has 
missing (typically, 
lower layer) 
components. 
 
Enumerations: 
1 - up 
2 - down 
3 - noIfIdentifier 
4 - unknown 
5 - notPresent 
JUNIPER-MIB 
(jnx-chassis.txt) 
jnxFruOffline 
.1.3.6.1.4.1.2636.4.1.1
0 
Snmp trap 
(critical) 
A jnxFruOffline trap 
signifies that the 
SNMP 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
110 
entity, acting in an 
agent role, has 
detected 
that the specified FRU 
(Field Replaceable 
Unit) 
has gone offline in the 
chassis. 
 
 
https://apps.juniper.net/mib-
explorer/navigate?software=Junos%20OS&release=22.2R2&name=jnxFruOfflineReason&oid=1.3.6.1.
4.1.2636.3.1.15.1.10 
 
JUNIPER-MIB 
(jnx-chassis.txt) 
jnxFruOnline 
.1.3.6.1.4.1.2636.4.1.1
1 
Snmp Trap 
(Clear) 
A jnxFruOnline trap 
signifies that the 
SNMP 
entity, acting in an 
agent role, has 
detected that 
the specified FRU 
(Field Replaceable 
Unit) has 
gone online in the 
chassis. 
JUNIPER-MIB 
(jnx-chassis.txt) 
jnxFruPowerOn 
.1.3.6.1.4.1.2636.4.1.8 
Snmp Trap 
(Clear) 
A jnxFruOnline trap 
signifies that the 
SNMP 
entity, acting in an 
agent role, has 
detected that 
the specified FRU 
(Field Replaceable 
Unit) has 
gone online in the 
chassis. 
JUNIPER-MIB 
(jnx-chassis.txt) 
jnxFruPowerOff 
.1.3.6.1.4.1.2636.4.1.7 
Snmp trap 
(critical) 
A jnxFruPowerOff trap 
signifies that the 
SNMP  
entity, acting in an 
agent role, has 
detected  
that the specified FRU 
(Field Replaceable 
Unit) 
has been powered off 
in the chassis. 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
111 
JUNIPER-MIB 
(jnx-chassis.txt) 
jnxFruRemoval 
.1.3.6.1.4.1.2636.4.1.5 
Snmp Trap 
(critical) 
A jnxFruRemoval trap 
signifies that the 
SNMP  
entity, acting in an 
agent role, has 
detected  
that the specified FRU 
(Field Replaceable 
Unit) 
has been removed 
from the chassis. 
 
The FRU type for this 
subject. 
 
Enumerations: 
1 - other 
2 - clockGenerator 
3 - 
flexiblePicConcentrato
r 
4 - 
switchingAndForwardi
ngModule 
5 - controlBoard 
6 - routingEngine 
7 - powerEntryModule 
8 - frontPanelModule 
9 - 
switchInterfaceBoard 
10 - 
processorMezzanineB
oardForSIB 
11 - portInterfaceCard 
12 - 
craftInterfacePanel 
13 - fan 
14 - lineCardChassis 
15 - 
forwardingEngineBoar
d 
16 - 
protectedSystemDom
ain 
17 - 
powerDistributionUnit 
18 - 
powerSupplyModule 
19 - switchFabricBoard
20 - adapterCard 
21 - ftc 
22 - tib 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
112 
 
 
JUNIPER-MIB 
(jnx-chassis.txt) 
jnxFruInsertion 
.1.3.6.1.4.1.2636.4.1.6 
Snmp Trap 
(Clear) 
A jnxFruInsertion trap 
signifies that the 
SNMP  
entity, 
acting in an 
agent role, has 
detected that 
the specified FRU 
(Field Replaceable 
Unit) has been  
inserted into the 
chassis. 
 
 
JUNIPER-MIB 
(jnx-chassis.txt) 
jnxPowerSupplyInput
Failure 
.1.3.6.1.4.1.2636.4.1.5 
Snmp Trap 
(critical) 
6 - down 
 
(Clear) 
2 - running 
 
A jnxFruRemoval trap 
signifies that the 
SNMP  
entity, acting in an 
agent role, has 
detected  
that the specified FRU 
(Field Replaceable 
Unit) 
has been removed 
from the chassis. 
 
The operating state of 
this subject. 
 
Enumerations: 
1 - unknown 
2 - running 
3 - ready 
4 - reset 
5 - runningAtFullSpeed
6 - down 
7 - standby 
 
JUNIPER-MIB 
(jnx-chassis.txt) 
 
jnxFanFailure 
.1.3.6.1.4.1.2636.4.1.2 
Snmp Trap 
(critical) 
6 - down 
 
(Clear) 
2 - running 
 
 
The operating state of 
this subject. 
 
Enumerations: 
1 - unknown 
2 - running 
3 - ready 
4 - reset 
5 - runningAtFullSpeed
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
113 
6 - down 
7 - standby 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
114 
Appendix A - Upgrade System Software from 
Factory Shipment 
Using USB installation 
 
First, user goes to Juniper.net to download USB image 
 
https://support.juniper.net/support/downloads/?f=acx 
 
Ex. image =   junos-evo-install-media-usb-acx-f-x86-64-22.4R2-S1.8-EVO.img 
 
Do MD5 check on download image with checksum text 
 
In window power shell prompt: 
 
Get-FileHash junos-evo-install-media-usb-acx-f-x86-64-22.4R2-S1.8-EVO.img -Algorithm MD5 
 
 
 
Reference to do USB software upgrade JUNO EVO: 
https://www.juniper.net/documentation/us/en/software/junos/junos-install-upgrade-evo/overview-
evo/topics/task/booting-junos-with-linux-by-usb-new.html#id-usb-boot-junos-os-with-linux-onto-
the-device 
 
A user is required to create a Bootable USB Drive Using a Windows Device. Refer to above 
Juniper step by step instruction to create a bootable USB drive 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
115 
 
 
To install Junos OS Evolved on a device that runs Junos OS Evolved using a USB drive: 
 
1. Connect to the console. 
2. Insert the USB drive with the Junos OS Evolved package in the USB0 port on the routing 
device. 
3. Reboot the routing device from the CLI: 
 
user@host> request system shutdown reboot usb 
 
When the reboot and loading of the Junos OS Evolved package is complete, you have a choice 
as to running a snapshot or not: 
 
Installation of image junos-evo-install-acx-f-x86-64-22.4R2-S1.8-EVO done. 
Boot version is now 'junos-evo-install-acx-f-x86-64-22.4R2-S1.8-EVO' 
 
Do you want to run snapshot on secondary ssd? (Y/N) 
Enter N to skip taking a snapshot. The system keeps the previous snapshot. 
 
Do you want to run snapshot on secondary ssd? (Y/N)N 
    Setting next_boot 
    Booting from 0000 
Reboot the device to finish the installation. 
  
user@host-re0~# reboot 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
116 
Inband Software Upgrade 
 
Download a copy of install package and checksums  from Juniper Web site 
 
https://support.juniper.net/support/downloads/?f=acx 
 
 
Put a copy of JUNO EVO installed package to OSS jumpbox 
 
From direction at ACX to download from OSS sftp server 
 
scp user@server-ip:/remote-path/image   /local-path/. 
 
Example :  
lab@SRBHONTFUC71> scp lab@<jumpbox-ip:/path/junos-evo-install-acx-f-x86-64-22.4R2-S1.8-EVO.iso  
/var/tmp/. 
lab@jumpbox's password: 
junos-evo-install-acx-f-x86-64-22.4R2-S1.8-EVO.iso                                                                  100% 1664MB  
84.0MB/s   00:19 
 
lab@UC-ACX> file checksum md5 /var/tmp/junos-evo-install-acx-f-x86-64-22.4R2-S1.8-EVO.iso 
MD5 (/var/tmp/junos-evo-install-acx-f-x86-64-22.4R2-S1.8-EVO.iso) = 
7e5f659bc2c061741d01a234d6079036 
 
Compare the checksum with download MD5 text, then optional connect to console and  install package 
and reboot 
 
lab@SRBHONTFUC71> request system software add /var/tmp/junos-evo-install-acx-f-x86-64-22.4R2-
S1.8-EVO.iso no-validate reboot 
From SFTP server push image package down to ACX 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
117 
 
By default ACX incoming sftp is disabled.    
  
[lab@jumpbox JUNO]$ sftp lab@CSR-IP 
password: 
subsystem request failed on channel 0 
Couldn't read packet: Connection reset by peer 
[t061487@SRBHONTFHHP01 JUNO]$ 
 
** First to configure  ACX to access incoming sftp 
 
set system services ssh sftp-server 
 
At jumpbox move to JUNO install package directory 
 
scp   /local-path/image    user@remote-csr-ip:/var/tmp/. 
 
Example:  
scp /path/junos-evo-install-acx-f-x86-64-22.4R2-S2.4-EVO.iso   lab@remote-csr-ip:/var/tmp/. 
 
file checksum md5 /var/tmp/junos-evo-install-acx-f-x86-64-22.4R2-S2.4-EVO.iso 
 
lab@SRBHONTFUC71> request system software add /var/tmp/junos-evo-install-acx-f-x86-64-22.4R2-
S2.4-EVO.iso no-validate reboot 
 
to finish installation. 
 
** When system reboot to console prompt, it takes about 5 mins to restore all interfaces and routing 
protocols. 
 
 
To check software packages in use and as backup in ACX: 
 
lab@SRBHONTFUC71> show system software list 
------------------------------- 
node: re0 
------------------------------- 
Active boot device is primary: /dev/mmcblk0 
List of installed version(s) : 
 
    '-' running version 
    '>' next boot version after upgrade/downgrade 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
118 
    '<' rollback boot version 
    '*' deleted JSU version 
 
 -   junos-evo-install-acx-f-x86-64-22.4R2-S1.8-EVO - [2023-08-18 15:37:09] 
 <   junos-evo-install-acx-f-x86-64-22.4R2.11-EVO - [2023-06-21 15:00:33] 
 
 
Image can be delete to free up space, or rollback  
 
lab@SRBHONTFUC71> request system software ? 
Possible completions: 
  add                  Add extension or upgrade package 
  delete               Remove extension or upgrade package 
  rollback             Attempt to roll back to previous set of packages 
  validate             Verify package compatibility with current configuration 
  validate-restart     Verify new package with current config and get ISSU impact 
 
 
LICENSE is RTU at this monet,  planners are required to purchase software license.. Please refer to the 
license section. 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
119 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
120 
Appendix B Commands 
 
 
To check port and SFP status
 
lab@SRBHONTFUC71> show chassis pic fpc-slot 0 pic-slot 0 
 
FPC slot 0, PIC slot 0 information: 
  Type                             MRATE- 24xSFP28 + 4xQSFP 
  State                            Online 
  PIC version                    00.00 
  Uptime                           66 days, 19 hours, 32 minutes, 53 seconds 
 
PIC port information: 
                         Fiber                    Xcvr vendor       Wave-                     Xcvr          JNPR     MSA 
  Port Cable type        type  Xcvr vendor        part number       length                    Firmware      Rev      Version 
  0    100G LR           SM    JUNIPER-1W2        1W2QGA            1311 nm                   0.0           REV 01   SFF-8636                                             ver 2.10 
  5    SFP-1000BASE-SX   MM    CHAMPION ONE       1000SFP055        850 nm                    0.0           0        SFF-8472                                             ver 9.3 
  6    SFP28-25G-BASE-LR SM    JUNIPER-1A1        1A13AA            1310 nm                   0.0           REV 01   SFF-8472                                             ver 12.3 
  8    10GBASE DWDM IT   SM    JUNIPER-1H1        1H1TZC            1528.77 nm - 1566.72 nm   0.0           REV 01   SFF-8472                                             ver 11.3 
  9    10GBASE BX10-D    SM    JUNIPER-FINISAR    FTLX2071D333-J1   1330 nm                   0.0           REV 01   SFF-8472                                             ver 11.0 
  10   SFP-1000BASE-SX   MM    CHAMPION ONE       1000SFP055        850 nm                    0.0           0        SFF-8472                                             ver 9.3 
 
Port speed information: 
 
  Port  PFE      Capable Port Speeds 
  0      0       1x100G 1x40G 2x50G 4x25G 4x10G 
  1      0       1x100G 1x40G 2x50G 4x25G 4x10G 
  2      0       1x100G 1x40G 2x50G 4x25G 4x10G 
  3      0       1x100G 1x40G 2x50G 4x25G 4x10G 
  4      0       1x10G 1x1G 1x25G 
  5      0       1x10G 1x1G 1x25G 
  6      0       1x10G 1x1G 1x25G 
  7      0       1x10G 1x1G 1x25G 
  8      0       1x10G 1x1G 1x25G 
  9      0       1x10G 1x1G 1x25G 
  10     0       1x10G 1x1G 1x25G 
  11     0       1x10G 1x1G 1x25G 
  12     0       1x10G 1x1G 1x25G 
  13     0       1x10G 1x1G 1x25G 
  14     0       1x10G 1x1G 1x25G 
  15     0       1x10G 1x1G 1x25G 
  16     0       1x10G 1x1G 1x25G 
  17     0       1x10G 1x1G 1x25G 
  18     0       1x10G 1x1G 1x25G 
  19     0       1x10G 1x1G 1x25G 
  20     0       1x10G 1x1G 1x25G 
  21     0       1x10G 1x1G 1x25G 
  22     0       1x10G 1x1G 1x25G 
  23     0       1x10G 1x1G 1x25G 
  24     0       1x10G 1x1G 1x25G 
  25     0       1x10G 1x1G 1x25G 
  26     0       1x10G 1x1G 1x25G 
  27     NA      1x10G 1x1G 1x25G  (Reserved for PTP when PTP has been enabled) 
  28     0       1x10G  (internal port - not available to user) 
show system storage      */check SSD space 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
121 
show dhcp server binding routing-instance <NAME>  */check dhcp client binding 
show dhcp server statistics routing-instance  <NAME> */check dhcp statistic 
show dhcp relay binding routing-instance  <NAME>  */check dhcp relay client binding 
show dhcp relay statistics routing-instance  <NAME> */check dhcp relay statistic 
show route summary */check route table summary 
show route receive-protocol bgp <neigbour>  table <NAME>  */check bgp routes 
advertise from neighbor 
show route advertising-protocol bgp <neigbour>  table <NAME>  */check bgp routes to be 
received from neighbor 
show route instance NG-RAN-CP extensive  */check VR informaton 
show chassis environment  */check HW status 
show chassis power  */check power status 
show chassis fan   */check fan status 
show system software list  */check active/inactive software in storage 
show firewall filter  <NAME>  */check firewall rule counter if any 
show interfaces et-fpc/pic/port  extensive  */check interface statistic 
show interfaces diagnostics optics et-fpc/pic/port  */check port SFP statistic/status 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
122 
Appendix C - Port Mirror 
Port Mirroring 
 
*/ create a dummy vlan on input interface ; ex. dummy vlan 99 
 
set interfaces et-0/0/x description “port description“ 
set interfaces et-0/0/x hierarchical-scheduler 
set interfaces et-0/0/x flexible-vlan-tagging 
set interfaces et-0/0/x speed 10g 
set interfaces et-0/0/x mtu 9216 
set interfaces et-0/0/x encapsulation flexible-ethernet-services 
set interfaces et-0/0/x unit 0 description "dummy vlan for analyzer" 
set interfaces et-0/0/x unit 0 vlan-id 99  # it can be any unused vlan on this interface 
set interfaces et-0/0/x unit 0 family ethernet-switching 
 
*/ create output interface to be connected to sniffer 
set interfaces et-0/0/y description “port description“ 
set interfaces et-0/0/y  hierarchical-scheduler 
set interfaces et-0/0/y  flexible-vlan-tagging 
set interfaces et-0/0/y  speed 1g 
set interfaces et-0/0/y  mtu 9216 
set interfaces et-0/0/y  encapsulation flexible-ethernet-services 
set interfaces et-0/0/y  unit 0 vlan-id 711  # dummy vlan for analyzer output  
set interfaces et-0/0/y  unit 0 family ethernet-switching 
 
*/ create analyser input and output cfg 
 
set forwarding-options analyzer NAME-MIRROR input ingress interface et-0/0/x.0 
set forwarding-options analyzer NAME-MIRROR input egress interface et-0/0/x.0 
 
set forwarding-options analyzer NAME-MIRROR output interface et-0/0/y.0 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
123 
Packet counter setup 
 
*/ Firewall packet capture filter, typically use for troubleshooting purpose to identify a specific 
type of IPV4/IPV6 packet passing through an interface 
 
Example IPV4: 
 
set firewall family inet filter wan-in-v4-test interface-specific 
set firewall family inet filter wan-in-v4-test term 1 from dscp af11  */ define match criteria 
set firewall family inet filter wan-in-v4-test term 1 then count inbound-af11-counter 
set firewall family inet filter wan-in-v4-test term 1 then log 
set firewall family inet filter wan-in-v4-test term 1 then accept 
set firewall family inet filter wan-in-v4-test term default then accept 
 
*/apply to an interface 
 
set interfaces et-0/0/0 unit 2001 family inet filter input wan-in-v4-test 
 
lab@SRBHONTFUC71> show firewall filter ? 
Possible completions: 
  <filtername>         Filter name 
  IP-ALARM-L2-100M-et-0/0/5.0-i 
  application          Owner application 
  counter              Counter name 
  no-forwarding        No forwarding 
  protect-RE-lo0.0-i 
  regex                Show filter using regular expression 
  version              Show filter version installed 
  wan-in-v4-test-et-0/0/0.2001-i 
  wan-in-v6-in-et-0/0/0.2001-i 
 
*/ check output 
SRBHONTFUC71> show firewall filter wan-in-v4-test-et-0/0/0.2001-i 
 
Filter: wan-in-v4-test-et-0/0/0.2001-i 
Counters: 
Name                                                                            Bytes              Packets 
inbound-af11-counter-et-0/0/0.2001-i                                            11130                  105 
 
 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
124 
Example IPV6: 
 
set firewall family inet6 filter wan-in-v6-in interface-specific 
set firewall family inet6 filter wan-in-v6-in term 1 from traffic-class af41  */ define match criteria 
set firewall family inet6 filter wan-in-v6-in term 1 then count inbound-af11-v6-counter 
set firewall family inet6 filter wan-in-v6-in term 1 then log 
set firewall family inet6 filter wan-in-v6-in term 1 then accept 
set firewall family inet6 filter wan-in-v6-in term default then accept 
 
*/apply to an interface 
set interfaces et-0/0/0 unit 2001 family inet6 filter input wan-in-v6-in 
 
@SRBHONTFUC71> show firewall filter ? 
Possible completions: 
  <filtername>         Filter name 
  IP-ALARM-L2-100M-et-0/0/5.0-i 
  application          Owner application 
  counter              Counter name 
  no-forwarding        No forwarding 
  protect-RE-lo0.0-i 
  regex                Show filter using regular expression 
  version              Show filter version installed 
  wan-in-v4-test-et-0/0/0.2001-i 
  wan-in-v6-in-et-0/0/0.2001-i 
 
*/ check output 
@SRBHONTFUC71> show firewall filter wan-in-v6-in-et-0/0/0.2001-i 
 
Filter: wan-in-v6-in-et-0/0/0.2001-i 
Counters: 
Name                                                                            Bytes              Packets 
inbound-af11-v6-counter-et-0/0/0.2001-i                                          1008                    8 
 
 
 
 
 
TELUS Communications Inc.                                                            
Company Confidential – Internal Use Only 
125 
Appendix D  Reference 
 
 
ACX7024 Hardware Guide 
 
 https://www.juniper.net/documentation/us/en/hardware/acx7024/index.html 
 
ACX7024 Installation 
 
https://www.juniper.net/documentation/us/en/hardware/acx7024/topics/task/acx7024-installing-and-
connecting.html 
 
Software download 
 
https://support.juniper.net/support/downloads/?f=acx 
 
Software documentation 
 
https://www.juniper.net/documentation/product/us/en/junos-os-
evolved/#cat=software_documentation 
 
Junos® OS Evolved Software Installation and Upgrade Guide 
 
https://www.juniper.net/documentation/us/en/software/junos/junos-install-upgrade-evo/overview-
evo/topics/task/booting-junos-with-linux-by-usb-new.html#id-usb-boot-junos-os-with-linux-onto-the-
device 
 
 
 
 
